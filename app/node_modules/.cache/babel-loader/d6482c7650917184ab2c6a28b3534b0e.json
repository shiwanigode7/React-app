{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useContext } from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport Popover from \"material-ui-popup-state/HoverPopover\";\nimport PopupState, { bindHover, bindPopover } from \"material-ui-popup-state\";\nimport { ComponentsDataContext } from \"../../data/componentsContext\";\nimport appsMetadata from \"../../data/appsMetadata\";\nimport Proptypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nvar defaultApp = \"esko\";\nvar Variants = {\n  MINIMAL: \"minimal\"\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    logoHolder: {\n      display: \"flex\",\n      flex: \"initial\",\n      flexDirection: \"row\",\n      alignItems: \"center\"\n    }\n  };\n});\n\nvar renderLogoAndName = function renderLogoAndName(_ref) {\n  var minimal = _ref.minimal,\n      title = _ref.title,\n      logo = _ref.logo;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      flex: \"initial\",\n      display: \"flex\",\n      marginRight: minimal ? \"\" : \"10px\"\n    }\n  }, logo), !minimal && /*#__PURE__*/React.createElement(Typography, {\n    style: {\n      flex: \"initial\"\n    },\n    variant: \"subtitle1\"\n  }, title));\n};\n\nexport var AppBadge = function AppBadge(_ref2) {\n  var variant = _ref2.variant,\n      title = _ref2.title,\n      line1 = _ref2.line1,\n      line2 = _ref2.line2,\n      logo = _ref2.logo,\n      _ref2$showPopup = _ref2.showPopup,\n      showPopup = _ref2$showPopup === void 0 ? true : _ref2$showPopup;\n  var minimal = variant === Variants.MINIMAL;\n  var showPopover = (!!title || !!line1 || !!line2) && showPopup;\n  var classes = useStyles();\n  return /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      display: \"inline-block\"\n    }\n  }, showPopover && /*#__PURE__*/React.createElement(PopupState, {\n    variant: \"popover\",\n    popupId: \"app-desc-popover\"\n  }, function (popupState) {\n    return /*#__PURE__*/React.createElement(\"span\", Object.assign({\n      className: clsx(classes.logoHolder)\n    }, bindHover(popupState)), renderLogoAndName({\n      minimal: minimal,\n      title: title,\n      logo: logo\n    }), /*#__PURE__*/React.createElement(Popover, Object.assign({}, bindPopover(popupState), {\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"right\"\n      },\n      transformOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      disableRestoreFocus: true\n    }), /*#__PURE__*/React.createElement(Box, {\n      p: 2\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"subtitle1\"\n    }, title), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"subtitle2\"\n    }, line1), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"subtitle2\"\n    }, line2))));\n  }), !showPopover && /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.logoHolder)\n  }, renderLogoAndName({\n    minimal: minimal,\n    title: title,\n    logo: logo\n  })));\n};\nexport var ConnectedAppBadge = function ConnectedAppBadge(_a) {\n  var _b;\n\n  var variant = _a.variant,\n      id = _a.id,\n      moreProps = __rest(_a, [\"variant\", \"id\"]); //no id default to current app\n\n\n  var appId = id || window.location.host.split(\".\").splice(0, 1).join(\"\");\n  var compData = useContext(ComponentsDataContext);\n  var app = ((_b = compData === null || compData === void 0 ? void 0 : compData.apps) === null || _b === void 0 ? void 0 : _b.current.key) === appId ? compData === null || compData === void 0 ? void 0 : compData.apps.current : (compData === null || compData === void 0 ? void 0 : compData.apps[appId]) || appsMetadata[defaultApp];\n  var revision = (compData === null || compData === void 0 ? void 0 : compData.revision) || {};\n  var title = app.title || \"\";\n  var morePropsFalsy = {};\n\n  if (moreProps) {\n    Object.keys(moreProps).forEach(function (key) {\n      if (typeof moreProps[key] !== \"undefined\") {\n        morePropsFalsy[key] = moreProps[key];\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(AppBadge, Object.assign({\n    variant: variant,\n    title: title,\n    line1: revision.version || revision.error,\n    line2: revision.date,\n    logo: app.logo\n  }, morePropsFalsy));\n};\nConnectedAppBadge.propTypes = {\n  id: Proptypes.string,\n  variant: Proptypes.string,\n  title: Proptypes.string,\n  line1: Proptypes.string,\n  line2: Proptypes.string,\n  logo: Proptypes.node,\n  showPopup: Proptypes.bool\n};\nAppBadge.propTypes = {\n  variant: Proptypes.string,\n  title: Proptypes.string,\n  line1: Proptypes.string,\n  line2: Proptypes.string,\n  logo: Proptypes.node,\n  showPopup: Proptypes.bool\n};","map":{"version":3,"sources":["../../../../src/components/AppBadge/index.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useContext } from \"react\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport Popover from \"material-ui-popup-state/HoverPopover\";\nimport PopupState, { bindHover, bindPopover } from \"material-ui-popup-state\";\nimport { ComponentsDataContext } from \"../../data/componentsContext\";\nimport appsMetadata from \"../../data/appsMetadata\";\nimport Proptypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nconst defaultApp = \"esko\";\nconst Variants = {\n    MINIMAL: \"minimal\"\n};\nconst useStyles = makeStyles(theme => ({\n    logoHolder: { display: \"flex\", flex: \"initial\", flexDirection: \"row\", alignItems: \"center\" }\n}));\nconst renderLogoAndName = ({ minimal, title, logo }) => {\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"span\", { style: { flex: \"initial\", display: \"flex\", marginRight: minimal ? \"\" : \"10px\" } }, logo),\n        !minimal && (React.createElement(Typography, { style: { flex: \"initial\" }, variant: \"subtitle1\" }, title))));\n};\nexport const AppBadge = ({ variant, title, line1, line2, logo, showPopup = true }) => {\n    const minimal = variant === Variants.MINIMAL;\n    const showPopover = (!!title || !!line1 || !!line2) && showPopup;\n    const classes = useStyles();\n    return (React.createElement(\"span\", { style: { display: \"inline-block\" } },\n        showPopover && (React.createElement(PopupState, { variant: \"popover\", popupId: \"app-desc-popover\" }, popupState => (React.createElement(\"span\", Object.assign({ className: clsx(classes.logoHolder) }, bindHover(popupState)),\n            renderLogoAndName({ minimal, title, logo }),\n            React.createElement(Popover, Object.assign({}, bindPopover(popupState), { anchorOrigin: {\n                    vertical: \"bottom\",\n                    horizontal: \"right\"\n                }, transformOrigin: {\n                    vertical: \"bottom\",\n                    horizontal: \"left\"\n                }, disableRestoreFocus: true }),\n                React.createElement(Box, { p: 2 },\n                    React.createElement(Typography, { variant: \"subtitle1\" }, title),\n                    React.createElement(Typography, { variant: \"subtitle2\" }, line1),\n                    React.createElement(Typography, { variant: \"subtitle2\" }, line2))))))),\n        !showPopover && React.createElement(\"span\", { className: clsx(classes.logoHolder) }, renderLogoAndName({ minimal, title, logo }))));\n};\nexport const ConnectedAppBadge = (_a) => {\n    var _b;\n    var { variant, id } = _a, moreProps = __rest(_a, [\"variant\", \"id\"]);\n    //no id default to current app\n    let appId = id ||\n        window.location.host\n            .split(\".\")\n            .splice(0, 1)\n            .join(\"\");\n    const compData = useContext(ComponentsDataContext);\n    const app = ((_b = compData === null || compData === void 0 ? void 0 : compData.apps) === null || _b === void 0 ? void 0 : _b.current.key) === appId ? compData === null || compData === void 0 ? void 0 : compData.apps.current : (compData === null || compData === void 0 ? void 0 : compData.apps[appId]) || appsMetadata[defaultApp];\n    const revision = (compData === null || compData === void 0 ? void 0 : compData.revision) || {};\n    const title = app.title || \"\";\n    const morePropsFalsy = {};\n    if (moreProps) {\n        Object.keys(moreProps).forEach(key => {\n            if (typeof moreProps[key] !== \"undefined\") {\n                morePropsFalsy[key] = moreProps[key];\n            }\n        });\n    }\n    return (React.createElement(AppBadge, Object.assign({ variant: variant, title: title, line1: revision.version || revision.error, line2: revision.date, logo: app.logo }, morePropsFalsy)));\n};\nConnectedAppBadge.propTypes = {\n    id: Proptypes.string,\n    variant: Proptypes.string,\n    title: Proptypes.string,\n    line1: Proptypes.string,\n    line2: Proptypes.string,\n    logo: Proptypes.node,\n    showPopup: Proptypes.bool\n};\nAppBadge.propTypes = {\n    variant: Proptypes.string,\n    title: Proptypes.string,\n    line1: Proptypes.string,\n    line2: Proptypes.string,\n    logo: Proptypes.node,\n    showPopup: Proptypes.bool\n};\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}