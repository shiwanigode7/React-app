{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React from \"react\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FormControl, InputLabel, TextField, FormGroup, Typography } from \"@material-ui/core\";\nimport Error from '@material-ui/icons/ErrorOutlineRounded';\nimport Thick from '@material-ui/icons/CheckCircleOutline';\nimport { Button } from \"@esko/cloud-ui-components\";\nimport UsersDialog from \"../Dialog/dialog\";\nimport { checkUser, addOrgUsers } from \"../../data/requests/iam\";\nvar styles = makeStyles(function (theme) {\n  return {\n    field: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      boxSizing: \"border-box\",\n      flex: 1,\n      \"&:last-of-type\": {\n        marginRight: 0\n      },\n      \"&:first-of-type\": {\n        marginLeft: 0\n      }\n    },\n    iconLabel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      top: -2\n    },\n    requiredLabel: {\n      \"&::before\": {\n        content: '\"*\"'\n      }\n    },\n    dialogContent: {\n      minWidth: 400,\n      minHeight: 50,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      textAlign: \"center\"\n    }\n  };\n});\n\nvar valRequired = function valRequired(value) {\n  return value != \"\" && value != undefined && value != null;\n};\n\nvar valEmail = function valEmail(value) {\n  return /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/.test(value);\n};\n\nvar CreateUserForm = function CreateUserForm(_ref) {\n  var open = _ref.open,\n      organization = _ref.organization,\n      onUserAdded = _ref.onUserAdded,\n      onError = _ref.onError,\n      onClose = _ref.onClose,\n      t = _ref.t;\n  var classes = styles();\n  var cleanForm = {\n    email: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    \"function\": \"\",\n    initials: \"\",\n    phone: \"\",\n    partner: \"\",\n    isExternal: \"\",\n    userd: \"\"\n  };\n  var cleanErrors = {\n    email: \"\",\n    firstName: \"\",\n    lastName: \"\"\n  };\n  var cleanUserCheck = {\n    checking: \"\",\n    available: \"\",\n    exists: \"\",\n    creating: \"\",\n    done: \"\",\n    error: \"\",\n    editing: \"\"\n  };\n  var postBody = {\n    email: \"\",\n    employeeType: \"\",\n    firstName: \"\",\n    surName: \"\",\n    \"function\": \"\",\n    initials: \"\",\n    organizationName: \"\",\n    mobileNumber: \"\",\n    path: \"\",\n    userid: \"\",\n    //no change\n    logoUrl: null,\n    organisationReadableName: \"\",\n    partnerNodeId: \"\",\n    secondaryEmail: \"\",\n    siteName: \"\",\n    siteTitle: \"\",\n    userLanguage: \"\",\n    userType: \"internal\"\n  };\n  React.useEffect(function () {\n    if (open) {\n      updateUserCheck([\"editing\"]);\n    }\n  }, [open]);\n  var validations = {\n    email: {\n      validations: [{\n        method: valRequired,\n        errMessage: t(\"errorMessages.fieldIsRequired\", {\n          field: t(\"email\")\n        })\n      }, {\n        method: valEmail,\n        errMessage: t(\"errorMessages.enterValidField\", {\n          field: t(\"email\")\n        })\n      }]\n    },\n    firstName: {\n      validations: [{\n        method: valRequired,\n        errMessage: t(\"errorMessages.fieldIsRequired\", {\n          field: t(\"firstName\")\n        })\n      }]\n    },\n    lastName: {\n      validations: [{\n        method: valRequired,\n        errMessage: t(\"errorMessages.fieldIsRequired\", {\n          field: t(\"lastName\")\n        })\n      }]\n    }\n  };\n\n  var _React$useState = React.useState(cleanForm),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      form = _React$useState2[0],\n      setForm = _React$useState2[1];\n\n  var _React$useState3 = React.useState(cleanErrors),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      errors = _React$useState4[0],\n      setErrors = _React$useState4[1];\n\n  var _React$useState5 = React.useState(cleanUserCheck),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      userCheck = _React$useState6[0],\n      setUserCheck = _React$useState6[1];\n\n  var checkUserTimeoutToken = React.useRef();\n\n  var updateUserCheck = function updateUserCheck(keys) {\n    if (keys) {\n      var newValues = {};\n      keys.forEach(function (key) {\n        newValues[key] = true;\n      });\n      setUserCheck(function (currCheck) {\n        return Object.assign(Object.assign({}, cleanUserCheck), newValues);\n      });\n    } else {\n      setUserCheck(cleanUserCheck);\n    }\n  };\n\n  var checkAllValidations = function checkAllValidations() {\n    var pass = true;\n    Object.keys(validations).forEach(function (key) {\n      var value = form[key];\n\n      if (!checkValidation({\n        key: key,\n        value: value\n      })) {\n        pass = false;\n      }\n    });\n    return pass;\n  };\n\n  var checkValidation = function checkValidation(_ref2) {\n    var e = _ref2.e,\n        value = _ref2.value,\n        key = _ref2.key;\n\n    var _a, _b;\n\n    key = key || e.target.name;\n    value = typeof value === \"undefined\" ? e.target.value : value;\n    var pass = true;\n\n    if ((_b = (_a = validations[key]) === null || _a === void 0 ? void 0 : _a.validations) === null || _b === void 0 ? void 0 : _b.length) {\n      validations[key].validations.some(function (valid) {\n        pass = valid.method(value);\n\n        if (!pass) {\n          setErrors(function (currErr) {\n            return Object.assign(Object.assign({}, currErr), _defineProperty({}, key, valid.errMessage));\n          });\n          return true;\n        }\n      });\n    }\n\n    if (pass) {\n      setErrors(function (currErr) {\n        return Object.assign(Object.assign({}, currErr), _defineProperty({}, key, \"\"));\n      });\n    }\n\n    return pass;\n  };\n\n  var updateForm = function updateForm(e) {\n    var value = e.target.value;\n    var key = e.target.name;\n\n    if (errors[key]) {\n      checkValidation({\n        value: value,\n        key: key\n      });\n    }\n\n    setForm(function (currForm) {\n      return Object.assign(Object.assign({}, currForm), _defineProperty({}, key, value));\n    });\n  };\n\n  var handleClose = function handleClose() {\n    setForm(cleanForm);\n    setErrors(cleanErrors);\n    updateUserCheck();\n    onClose();\n  };\n\n  var handleOnUserAdded = function handleOnUserAdded() {\n    if (typeof onUserAdded === \"function\") {\n      handleClose();\n      onUserAdded();\n    } else {\n      updateUserCheck([\"done\"]);\n    }\n  };\n\n  var handleAdd = function handleAdd() {\n    if (checkAllValidations()) {\n      var body = Object.assign(Object.assign({}, postBody), {\n        email: form.email,\n        firstName: form.firstName,\n        surName: form.lastName,\n        \"function\": form[\"function\"],\n        initials: form.initials,\n        organizationName: organization,\n        mobileNumber: form.phone,\n        path: organization + \"/users\",\n        userid: form.userid\n      });\n      updateUserCheck([\"creating\"]);\n      addOrgUsers({\n        organization: organization,\n        body: body\n      }).then(function (resp) {\n        handleOnUserAdded();\n      }, function (err) {\n        updateUserCheck([\"error\"]);\n      });\n    }\n  };\n\n  var checkUserAvailability = function checkUserAvailability(_ref3) {\n    var organization = _ref3.organization,\n        email = _ref3.email;\n    checkUser({\n      organization: organization,\n      email: email\n    }).then(function (resp) {\n      var _a;\n\n      console.log(resp);\n      updateUserCheck([\"editing\"]);\n      var message = resp.message,\n          status = resp.status;\n\n      if (message === \"User found in IAM.\") {\n        updateUserCheck([\"exists\", \"editing\"]);\n      } else if (Array.isArray(message) && ((_a = message[0]) === null || _a === void 0 ? void 0 : _a.userInfo)) {\n        updateUserCheck([\"available\", \"editing\"]);\n        setForm(function (currForm) {\n          return Object.assign(Object.assign({}, currForm), {\n            firstName: message[0].userInfo.firstName,\n            lastName: message[0].userInfo.lastName,\n            userid: message[0].userid || \"\"\n          });\n        });\n      } else if (status === \"IAM_User_SSOCheck_404_404\") {\n        updateUserCheck([\"editing\"]);\n      }\n    }, function (err) {\n      console.log(err);\n      updateUserCheck([\"error\", \"editing\"]);\n    });\n  };\n\n  var checkUserToAdd = function checkUserToAdd(e) {\n    clearTimeout(checkUserTimeoutToken.current);\n    e.persist();\n    checkUserTimeoutToken.current = setTimeout(function () {\n      if (checkValidation({\n        e: e\n      })) {\n        var email = e.target.value;\n        updateUserCheck([\"checking\", \"editing\"]);\n        checkUserAvailability({\n          organization: organization,\n          email: email\n        });\n      } else {\n        updateUserCheck([\"editing\"]);\n      }\n    }, 500);\n  };\n\n  return /*#__PURE__*/React.createElement(UsersDialog, {\n    className: clsx(classes.dialog),\n    title: /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\"\n    }, t(\"addUser\")),\n    open: open,\n    content: /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx(_defineProperty({}, classes.dialogContent, !userCheck.editing))\n    }, userCheck.creating && /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body1\"\n    }, t(\"addingUser\")), userCheck.done && /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body1\"\n    }, t(\"addUserSuccess\")), userCheck.error && /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body1\"\n    }, t(\"errorAddingUser\"), \" \", /*#__PURE__*/React.createElement(\"p\", null, JSON.stringify(userCheck.error))), userCheck.editing && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FormControl, {\n      fullWidth: true,\n      title: userCheck.exists ? t(\"errorMessages.userAlreadyExists\") : \"\"\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      className: clsx(classes.requiredLabel, _defineProperty({}, classes.iconLabel, userCheck.available || userCheck.exists)),\n      shrink: false\n    }, t(\"email\"), userCheck.exists && /*#__PURE__*/React.createElement(Error, {\n      color: \"error\"\n    }), userCheck.available && /*#__PURE__*/React.createElement(Thick, {\n      color: \"success\"\n    })), /*#__PURE__*/React.createElement(TextField, {\n      value: form.email,\n      name: \"email\",\n      autoFocus: true,\n      inputProps: {\n        readOnly: userCheck.checking\n      },\n      variant: \"outlined\",\n      onBlur: checkUserToAdd,\n      onChange: updateForm,\n      helperText: errors.email\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      margin: \"normal\",\n      className: clsx(classes.field)\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      shrink: false,\n      className: clsx(classes.requiredLabel)\n    }, t(\"firstName\")), /*#__PURE__*/React.createElement(TextField, {\n      name: \"firstName\",\n      inputProps: {\n        readOnly: userCheck.checking || userCheck.available\n      },\n      value: form.firstName,\n      variant: \"outlined\",\n      onChange: updateForm,\n      onBlur: function onBlur(e) {\n        return checkValidation({\n          e: e\n        });\n      },\n      helperText: errors.firstName\n    })), /*#__PURE__*/React.createElement(FormControl, {\n      margin: \"normal\",\n      className: clsx(classes.field)\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      shrink: false,\n      className: clsx(classes.requiredLabel)\n    }, t(\"lastName\")), /*#__PURE__*/React.createElement(TextField, {\n      name: \"lastName\",\n      inputProps: {\n        readOnly: userCheck.checking || userCheck.available\n      },\n      value: form.lastName,\n      variant: \"outlined\",\n      onChange: updateForm,\n      onBlur: function onBlur(e) {\n        return checkValidation({\n          e: e\n        });\n      },\n      helperText: errors.lastName\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      margin: \"normal\",\n      className: clsx(classes.field)\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      shrink: false\n    }, t(\"function\")), /*#__PURE__*/React.createElement(TextField, {\n      name: \"function\",\n      value: form[\"function\"],\n      variant: \"outlined\",\n      onChange: updateForm\n    })), /*#__PURE__*/React.createElement(FormControl, {\n      margin: \"normal\",\n      className: clsx(classes.field)\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      shrink: false\n    }, t(\"initials\")), /*#__PURE__*/React.createElement(TextField, {\n      name: \"initials\",\n      value: form.initials,\n      variant: \"outlined\",\n      onChange: updateForm\n    }))), /*#__PURE__*/React.createElement(FormControl, {\n      margin: \"normal\"\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      shrink: false\n    }, t(\"phone\")), /*#__PURE__*/React.createElement(TextField, {\n      name: \"phone\",\n      value: form.phone,\n      variant: \"outlined\",\n      onChange: updateForm\n    })))),\n    actions: /*#__PURE__*/React.createElement(React.Fragment, null, (!userCheck.done && !userCheck.creating || userCheck.done && !userCheck.creating) && /*#__PURE__*/React.createElement(Button, {\n      onClick: handleClose\n    }, t(\"close\")), !userCheck.done && !userCheck.creating && /*#__PURE__*/React.createElement(Button, {\n      disabled: userCheck.exists || !!Object.values(errors).join('') || userCheck.checking,\n      color: \"primary\",\n      onClick: handleAdd\n    }, t(\"addUser\")))\n  });\n};\n\nexport default CreateUserForm;","map":{"version":3,"sources":["../../../../src/components/Users/createUserForm.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import React from \"react\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FormControl, InputLabel, TextField, FormGroup, Typography } from \"@material-ui/core\";\nimport Error from '@material-ui/icons/ErrorOutlineRounded';\nimport Thick from '@material-ui/icons/CheckCircleOutline';\nimport { Button } from \"@esko/cloud-ui-components\";\nimport UsersDialog from \"../Dialog/dialog\";\nimport { checkUser, addOrgUsers } from \"../../data/requests/iam\";\nconst styles = makeStyles(theme => ({\n    field: {\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        boxSizing: \"border-box\",\n        flex: 1,\n        \"&:last-of-type\": {\n            marginRight: 0\n        },\n        \"&:first-of-type\": {\n            marginLeft: 0\n        }\n    },\n    iconLabel: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        top: -2\n    },\n    requiredLabel: {\n        \"&::before\": {\n            content: '\"*\"'\n        }\n    },\n    dialogContent: {\n        minWidth: 400,\n        minHeight: 50,\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        textAlign: \"center\"\n    }\n}));\nconst valRequired = value => {\n    return value != \"\" && value != undefined && value != null;\n};\nconst valEmail = value => {\n    return /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/.test(value);\n};\nconst CreateUserForm = ({ open, organization, onUserAdded, onError, onClose, t }) => {\n    const classes = styles();\n    const cleanForm = {\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        function: \"\",\n        initials: \"\",\n        phone: \"\",\n        partner: \"\",\n        isExternal: \"\",\n        userd: \"\"\n    };\n    const cleanErrors = {\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n    };\n    const cleanUserCheck = {\n        checking: \"\",\n        available: \"\",\n        exists: \"\",\n        creating: \"\",\n        done: \"\",\n        error: \"\",\n        editing: \"\"\n    };\n    const postBody = {\n        email: \"\",\n        employeeType: \"\",\n        firstName: \"\",\n        surName: \"\",\n        function: \"\",\n        initials: \"\",\n        organizationName: \"\",\n        mobileNumber: \"\",\n        path: \"\",\n        userid: \"\",\n        //no change\n        logoUrl: null,\n        organisationReadableName: \"\",\n        partnerNodeId: \"\",\n        secondaryEmail: \"\",\n        siteName: \"\",\n        siteTitle: \"\",\n        userLanguage: \"\",\n        userType: \"internal\",\n    };\n    React.useEffect(() => {\n        if (open) {\n            updateUserCheck([\"editing\"]);\n        }\n    }, [open]);\n    const validations = {\n        email: {\n            validations: [\n                {\n                    method: valRequired,\n                    errMessage: t(\"errorMessages.fieldIsRequired\", { field: t(\"email\") })\n                },\n                {\n                    method: valEmail,\n                    errMessage: t(\"errorMessages.enterValidField\", { field: t(\"email\") })\n                }\n            ],\n        },\n        firstName: {\n            validations: [\n                {\n                    method: valRequired,\n                    errMessage: t(\"errorMessages.fieldIsRequired\", { field: t(\"firstName\") })\n                },\n            ]\n        },\n        lastName: {\n            validations: [\n                {\n                    method: valRequired,\n                    errMessage: t(\"errorMessages.fieldIsRequired\", { field: t(\"lastName\") })\n                }\n            ]\n        }\n    };\n    const [form, setForm] = React.useState(cleanForm);\n    const [errors, setErrors] = React.useState(cleanErrors);\n    const [userCheck, setUserCheck] = React.useState(cleanUserCheck);\n    const checkUserTimeoutToken = React.useRef();\n    const updateUserCheck = (keys) => {\n        if (keys) {\n            const newValues = {};\n            keys.forEach(key => {\n                newValues[key] = true;\n            });\n            setUserCheck(currCheck => (Object.assign(Object.assign({}, cleanUserCheck), newValues)));\n        }\n        else {\n            setUserCheck(cleanUserCheck);\n        }\n    };\n    const checkAllValidations = () => {\n        let pass = true;\n        Object.keys(validations).forEach(key => {\n            const value = form[key];\n            if (!checkValidation({ key, value })) {\n                pass = false;\n            }\n        });\n        return pass;\n    };\n    const checkValidation = ({ e, value, key }) => {\n        var _a, _b;\n        key = key || e.target.name;\n        value = typeof value === \"undefined\" ? e.target.value : value;\n        let pass = true;\n        if ((_b = (_a = validations[key]) === null || _a === void 0 ? void 0 : _a.validations) === null || _b === void 0 ? void 0 : _b.length) {\n            validations[key].validations.some(valid => {\n                pass = valid.method(value);\n                if (!pass) {\n                    setErrors(currErr => (Object.assign(Object.assign({}, currErr), { [key]: valid.errMessage })));\n                    return true;\n                }\n            });\n        }\n        if (pass) {\n            setErrors(currErr => (Object.assign(Object.assign({}, currErr), { [key]: \"\" })));\n        }\n        return pass;\n    };\n    const updateForm = e => {\n        const value = e.target.value;\n        const key = e.target.name;\n        if (errors[key]) {\n            checkValidation({ value, key });\n        }\n        setForm(currForm => (Object.assign(Object.assign({}, currForm), { [key]: value })));\n    };\n    const handleClose = () => {\n        setForm(cleanForm);\n        setErrors(cleanErrors);\n        updateUserCheck();\n        onClose();\n    };\n    const handleOnUserAdded = () => {\n        if (typeof onUserAdded === \"function\") {\n            handleClose();\n            onUserAdded();\n        }\n        else {\n            updateUserCheck([\"done\"]);\n        }\n    };\n    const handleAdd = () => {\n        if (checkAllValidations()) {\n            const body = Object.assign(Object.assign({}, postBody), { email: form.email, firstName: form.firstName, surName: form.lastName, function: form.function, initials: form.initials, organizationName: organization, mobileNumber: form.phone, path: organization + \"/users\", userid: form.userid });\n            updateUserCheck([\"creating\"]);\n            addOrgUsers({ organization, body }).then(resp => {\n                handleOnUserAdded();\n            }, err => {\n                updateUserCheck([\"error\"]);\n            });\n        }\n    };\n    const checkUserAvailability = ({ organization, email }) => {\n        checkUser({ organization, email }).then(resp => {\n            var _a;\n            console.log(resp);\n            updateUserCheck([\"editing\"]);\n            const { message, status } = resp;\n            if (message === \"User found in IAM.\") {\n                updateUserCheck([\"exists\", \"editing\"]);\n            }\n            else if (Array.isArray(message) && ((_a = message[0]) === null || _a === void 0 ? void 0 : _a.userInfo)) {\n                updateUserCheck([\"available\", \"editing\"]);\n                setForm(currForm => (Object.assign(Object.assign({}, currForm), { firstName: message[0].userInfo.firstName, lastName: message[0].userInfo.lastName, userid: message[0].userid || \"\" })));\n            }\n            else if (status === \"IAM_User_SSOCheck_404_404\") {\n                updateUserCheck([\"editing\"]);\n            }\n        }, err => {\n            console.log(err);\n            updateUserCheck([\"error\", \"editing\"]);\n        });\n    };\n    const checkUserToAdd = e => {\n        clearTimeout(checkUserTimeoutToken.current);\n        e.persist();\n        checkUserTimeoutToken.current = setTimeout(() => {\n            if (checkValidation({ e })) {\n                const email = e.target.value;\n                updateUserCheck([\"checking\", \"editing\"]);\n                checkUserAvailability({ organization, email });\n            }\n            else {\n                updateUserCheck([\"editing\"]);\n            }\n        }, 500);\n    };\n    return (React.createElement(UsersDialog, { className: clsx(classes.dialog), title: React.createElement(Typography, { variant: \"h6\" }, t(\"addUser\")), open: open, content: React.createElement(\"div\", { className: clsx({ [classes.dialogContent]: !userCheck.editing }) },\n            userCheck.creating && React.createElement(Typography, { variant: \"body1\" }, t(\"addingUser\")),\n            userCheck.done && React.createElement(Typography, { variant: \"body1\" }, t(\"addUserSuccess\")),\n            userCheck.error && React.createElement(Typography, { variant: \"body1\" },\n                t(\"errorAddingUser\"),\n                \" \",\n                React.createElement(\"p\", null, JSON.stringify(userCheck.error))),\n            userCheck.editing &&\n                React.createElement(React.Fragment, null,\n                    React.createElement(FormControl, { fullWidth: true, title: userCheck.exists ? t(\"errorMessages.userAlreadyExists\") : \"\" },\n                        React.createElement(InputLabel, { className: clsx(classes.requiredLabel, { [classes.iconLabel]: userCheck.available || userCheck.exists }), shrink: false },\n                            t(\"email\"),\n                            userCheck.exists && React.createElement(Error, { color: \"error\" }),\n                            userCheck.available && React.createElement(Thick, { color: \"success\" })),\n                        React.createElement(TextField, { value: form.email, name: \"email\", autoFocus: true, inputProps: {\n                                readOnly: userCheck.checking\n                            }, variant: \"outlined\", onBlur: checkUserToAdd, onChange: updateForm, helperText: errors.email })),\n                    React.createElement(FormGroup, { row: true },\n                        React.createElement(FormControl, { margin: \"normal\", className: clsx(classes.field) },\n                            React.createElement(InputLabel, { shrink: false, className: clsx(classes.requiredLabel) }, t(\"firstName\")),\n                            React.createElement(TextField, { name: \"firstName\", inputProps: {\n                                    readOnly: userCheck.checking || userCheck.available\n                                }, value: form.firstName, variant: \"outlined\", onChange: updateForm, onBlur: e => checkValidation({ e }), helperText: errors.firstName })),\n                        React.createElement(FormControl, { margin: \"normal\", className: clsx(classes.field) },\n                            React.createElement(InputLabel, { shrink: false, className: clsx(classes.requiredLabel) }, t(\"lastName\")),\n                            React.createElement(TextField, { name: \"lastName\", inputProps: {\n                                    readOnly: userCheck.checking || userCheck.available\n                                }, value: form.lastName, variant: \"outlined\", onChange: updateForm, onBlur: e => checkValidation({ e }), helperText: errors.lastName }))),\n                    React.createElement(FormGroup, { row: true },\n                        React.createElement(FormControl, { margin: \"normal\", className: clsx(classes.field) },\n                            React.createElement(InputLabel, { shrink: false }, t(\"function\")),\n                            React.createElement(TextField, { name: \"function\", value: form.function, variant: \"outlined\", onChange: updateForm })),\n                        React.createElement(FormControl, { margin: \"normal\", className: clsx(classes.field) },\n                            React.createElement(InputLabel, { shrink: false }, t(\"initials\")),\n                            React.createElement(TextField, { name: \"initials\", value: form.initials, variant: \"outlined\", onChange: updateForm }))),\n                    React.createElement(FormControl, { margin: \"normal\" },\n                        React.createElement(InputLabel, { shrink: false }, t(\"phone\")),\n                        React.createElement(TextField, { name: \"phone\", value: form.phone, variant: \"outlined\", onChange: updateForm })))), actions: React.createElement(React.Fragment, null,\n            (!userCheck.done && !userCheck.creating || userCheck.done && !userCheck.creating) && React.createElement(Button, { onClick: handleClose }, t(\"close\")),\n            !userCheck.done && !userCheck.creating && React.createElement(Button, { disabled: userCheck.exists || !!Object.values(errors).join('') || userCheck.checking, color: \"primary\", onClick: handleAdd }, t(\"addUser\"))) }));\n};\nexport default CreateUserForm;\n//# sourceMappingURL=createUserForm.js.map"]},"metadata":{},"sourceType":"module"}