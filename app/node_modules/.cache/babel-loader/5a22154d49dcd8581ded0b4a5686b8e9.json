{"ast":null,"code":"function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Backdrop, CircularProgress, Typography } from \"@material-ui/core\";\nimport { Button, GroupCell, CreatedByCell, LongTextCell } from \"@esko/cloud-ui-components\";\nimport Group from \"@material-ui/icons/Group\";\nimport EditTwoToneIcon from \"@material-ui/icons/EditTwoTone\";\nimport Delete from \"@material-ui/icons/Delete\";\nimport Add from \"@material-ui/icons/Add\";\nimport { DataView } from \"@esko/cloud-ui-components\";\nimport AddGroupDialog from \"./addGroupDialog\";\nimport ManageGroupMembersDialog from \"./manageGroupMembersDialog\";\nimport DeleteGroupDialog from \"./deleteGroupDialog\";\nimport { getOrgGroups, addOrgGroup, deleteOrgGroups } from \"../../data/requests/iam\";\nimport useEventBus from \"../../utils/hooks/useEventBus\";\nimport { checkACL } from \"../../data/requests/repo\";\nimport MuiDialog from \"../Dialog/dialog\";\nimport { useComponentsTranslation } from \"../../i18n/useComponentsTranslation\";\nimport { useTranslation } from \"react-i18next\";\n\nvar styles = function styles(theme) {\n  return {\n    groupsContainer: {\n      boxSizing: \"border-box\",\n      width: \"100%\",\n      height: \"100%\",\n      padding: theme.spacing(1)\n    },\n    flexContainer: {\n      display: \"flex\",\n      alignItems: \"center\",\n      boxSizing: \"border-box\"\n    },\n    groupIcon: {\n      marginRight: theme.spacing(1)\n    }\n  };\n};\n\nvar LoadingBackdrop = withStyles({\n  root: {\n    position: \"absolute\",\n    zIndex: 1\n  }\n})(Backdrop);\n\nvar Groups = function Groups(_ref) {\n  var onSelectionChange = _ref.onSelectionChange,\n      organization = _ref.organization,\n      onError = _ref.onError,\n      classes = _ref.classes,\n      repoId = _ref.repoId,\n      language = _ref.language;\n  var groupIcon = classes.groupIcon,\n      flexContainer = classes.flexContainer;\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      permisions = _React$useState2[0],\n      setPermisions = _React$useState2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showLoading = _useState2[0],\n      setShowLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      groups = _useState4[0],\n      setGroups = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      search = _useState6[0],\n      setSearch = _useState6[1];\n\n  var _useState7 = useState({\n    showAddGroup: false,\n    showManageMembers: false,\n    showDeleteGroup: false,\n    selectedRows: [],\n    selectedRowData: {},\n    clearSelected: null,\n    addGroupFormData: {}\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      dialogState = _useState8[0],\n      setDialogState = _useState8[1];\n\n  var showAddGroup = dialogState.showAddGroup,\n      showManageMembers = dialogState.showManageMembers,\n      showDeleteGroup = dialogState.showDeleteGroup,\n      selectedRows = dialogState.selectedRows,\n      selectedRowData = dialogState.selectedRowData,\n      clearSelected = dialogState.clearSelected;\n\n  var _useComponentsTransla = useComponentsTranslation(),\n      i18next = _useComponentsTransla.i18next,\n      updatei18next = _useComponentsTransla.updatei18next,\n      I18nextProvider = _useComponentsTransla.I18nextProvider;\n\n  var _useTranslation = useTranslation(\"components\"),\n      t = _useTranslation.t;\n\n  React.useEffect(function () {\n    updatei18next(language);\n  }, [language]);\n\n  var _useState9 = useState({\n    presetName: \"\",\n    presetDescription: \"\",\n    presetEmail: \"\"\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      savedAddGroupFormData = _useState10[0],\n      setSavedAddGroupFormData = _useState10[1];\n\n  var _useState11 = useState({\n    open: false,\n    content: \"\",\n    type: \"\",\n    actions: \"\"\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      errorDialog = _useState12[0],\n      setErrorDialog = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isFetching = _useState14[0],\n      setIsFetching = _useState14[1];\n\n  var closeErrorDialog = useCallback(function () {\n    setErrorDialog(function (prevState) {\n      return Object.assign(Object.assign({}, prevState), {\n        open: false\n      });\n    });\n  }, []);\n  var reloadAddGroupDialog = useCallback(function () {\n    closeErrorDialog();\n    showAddGroupDialog({\n      clearSelected: clearSelected\n    });\n  }, [clearSelected, closeErrorDialog, showAddGroupDialog]);\n  var cancelAddGroupDialog = useCallback(function () {\n    setSavedAddGroupFormData({\n      presetName: \"\",\n      presetDescription: \"\",\n      presetEmail: \"\"\n    });\n    closeDialog();\n  }, [closeDialog]);\n  var closeDialog = useCallback(function () {\n    setDialogState(function (prevState) {\n      return Object.assign(Object.assign({}, prevState), {\n        showAddGroup: false,\n        showManageMembers: false,\n        showDeleteGroup: false,\n        selectedRows: [],\n        selectedRowData: {}\n      });\n    });\n  }, []);\n  var showAddGroupDialog = useCallback(function (_ref2) {\n    var clearSelected = _ref2.clearSelected;\n    setDialogState({\n      showAddGroup: true,\n      showManageMembers: false,\n      showDeleteGroup: false,\n      selectedRows: [],\n      selectedRowData: {},\n      clearSelected: clearSelected\n    });\n  }, []);\n\n  var showManageGroupMemebrsDialog = function showManageGroupMemebrsDialog(_ref3) {\n    var selected = _ref3.selected,\n        selectedRowData = _ref3.selectedRowData;\n    setDialogState({\n      showAddGroup: false,\n      showManageMembers: true,\n      showDeleteGroup: false,\n      selectedRows: selected,\n      selectedRowData: selectedRowData,\n      clearSelected: null\n    });\n  };\n\n  var showDeleteGroupsDialog = function showDeleteGroupsDialog(_ref4) {\n    var clearSelected = _ref4.clearSelected,\n        selected = _ref4.selected,\n        selectedRowData = _ref4.selectedRowData;\n    setDialogState({\n      showAddGroup: false,\n      showManageMembers: false,\n      showDeleteGroup: true,\n      selectedRows: selected,\n      selectedRowData: selectedRowData,\n      clearSelected: clearSelected\n    });\n  };\n\n  var socket = useRef();\n  var openSocket = useCallback(function () {\n    return socket.current = useEventBus({\n      path: \"\".concat(repoId, \"/EC:IAM/Groups\")\n    });\n  }, [repoId, socket]);\n\n  var closeSocket = function closeSocket() {\n    var _a, _b;\n\n    return ((_a = socket.current) === null || _a === void 0 ? void 0 : _a.close) ? (_b = socket.current) === null || _b === void 0 ? void 0 : _b.close() : false;\n  };\n\n  useEffect(function () {\n    if (repoId) {\n      openSocket();\n    }\n\n    return function () {\n      return closeSocket();\n    };\n  }, [openSocket, repoId]);\n\n  var setRefreshListener = function setRefreshListener(_ref5) {\n    var callbackId = _ref5.callbackId,\n        _ref5$callback = _ref5.callback,\n        callback = _ref5$callback === void 0 ? function (msg) {\n      return console.log(msg);\n    } : _ref5$callback;\n    socket.current.listen(callback, callbackId);\n  };\n\n  var setDeleteEventListeners = useCallback(function (_ref6) {\n    var eventListeners = _ref6.eventListeners;\n\n    if (socket.current) {\n      for (var callback in eventListeners) {\n        setRefreshListener({\n          callbackId: callback,\n          callback: eventListeners[callback]\n        });\n      }\n    } else {\n      refreshList();\n      closeDialog();\n    }\n  }, [closeDialog, refreshList]);\n  var handleAddGroup = useCallback(function (formState) {\n    setShowLoading(true);\n    closeDialog();\n    var groupName = formState.name.value,\n        groupDescription = formState.description.value,\n        groupEmail = formState.email.value;\n\n    if (socket.current) {\n      var path = \"\".concat(repoId, \"/EC:IAM/Groups/\") + encodeURI(groupName);\n      setRefreshListener({\n        callbackId: path,\n        callback: function callback(msg) {\n          var jsonMsg = JSON.parse(msg.data);\n\n          if (jsonMsg.path === path) {\n            socket.current.stopListening(path);\n            setSavedAddGroupFormData({\n              presetName: \"\",\n              presetDescription: \"\",\n              presetEmail: \"\"\n            });\n            setIsFetching(true);\n          }\n        }\n      });\n    }\n\n    addOrgGroup({\n      organization: organization,\n      groupName: groupName,\n      groupDescription: groupDescription,\n      groupEmail: groupEmail\n    }).then(function () {\n      if (!socket.current) {\n        closeDialog();\n        setIsFetching(true);\n      }\n    }, function (err) {\n      setShowLoading(false);\n      closeDialog();\n      setSavedAddGroupFormData({\n        presetName: groupName,\n        presetDescription: groupDescription,\n        presetEmail: groupEmail\n      });\n      handleError(err, err.status);\n    });\n  }, [closeDialog, handleError, organization, repoId]);\n  var handleDeleteGroups = useCallback(function () {\n    var groupsToDelete = [];\n    var eventListeners = {};\n    var eventIds = Object.keys(selectedRowData);\n    setShowLoading(true);\n    closeDialog();\n\n    for (var groupId in selectedRowData) {\n      groupsToDelete.push({\n        name: selectedRowData[groupId].displayName\n      });\n\n      if (socket.current) {\n        eventListeners[groupId] = function (msg) {\n          var jsonMsg = JSON.parse(msg.data);\n          var payload = jsonMsg.payload[0];\n          var eventIdIndex = eventIds.indexOf(payload);\n\n          if (eventIdIndex !== -1) {\n            socket.current.stopListening(payload);\n            eventIds.splice(eventIdIndex, 1);\n          }\n\n          if (!eventIds.length) {\n            setIsFetching(true);\n          }\n        };\n      }\n    }\n\n    if (socket.current) {\n      setDeleteEventListeners({\n        eventListeners: eventListeners\n      });\n    }\n\n    deleteOrgGroups({\n      organization: organization,\n      groupsToDelete: groupsToDelete\n    }).then(function () {\n      if (!socket.current) {\n        closeDialog();\n        setIsFetching(true);\n      }\n    }, function (err) {\n      setShowLoading(false);\n      closeDialog();\n      handleError(err, \"Getting Groups\");\n    });\n  }, [closeDialog, handleError, organization, selectedRowData, setDeleteEventListeners]);\n  var handleRemoveFromDelete = useCallback(function (groupId) {\n    var newSelectedRowData = Object.assign({}, selectedRowData);\n    delete newSelectedRowData[groupId];\n    setDialogState(function (prevState) {\n      return Object.assign(Object.assign({}, prevState), {\n        selectedRowData: newSelectedRowData\n      });\n    });\n  }, [selectedRowData]);\n  var handleError = useCallback(function (err, errorType) {\n    if (typeof onError === \"function\") {\n      onError(err);\n    } else {\n      var errors = {\n        409: t(\"groupAlreadyExists\"),\n        401: t(\"essionExpired\"),\n        400: \"\".concat(t(\"fieldsContainInvalidValues\"), \" \").concat(t(\"messageFromServer\"), \": \")\n      };\n      err.json().then(function (errorMsgJson) {\n        setErrorDialog(function (prevState) {\n          return Object.assign(Object.assign({}, prevState), {\n            open: true,\n            content: /*#__PURE__*/React.createElement(Typography, {\n              variant: \"h5\"\n            }, errors[errorType] + JSON.stringify(errorMsgJson)),\n            themeSpecificStyleHook: \"useErrorStyles\",\n            actions: /*#__PURE__*/React.createElement(Button, {\n              color: \"primary\",\n              onClick: closeErrorDialog\n            }, t(\"close\"))\n          });\n        });\n      }, function () {\n        var errorDialogCallback = errorType == 409 ? reloadAddGroupDialog : closeErrorDialog;\n        setErrorDialog(function (prevState) {\n          return Object.assign(Object.assign({}, prevState), {\n            open: true,\n            content: /*#__PURE__*/React.createElement(Typography, {\n              variant: \"h5\"\n            }, errors[errorType]),\n            themeSpecificStyleHook: \"useErrorStyles\",\n            actions: /*#__PURE__*/React.createElement(Button, {\n              color: \"primary\",\n              onClick: errorDialogCallback\n            }, t(\"close\"))\n          });\n        });\n      });\n    }\n  }, [closeErrorDialog, reloadAddGroupDialog, onError]);\n  var refreshList = useCallback(function () {\n    setGroups([]);\n    getGroups(searchInitialState);\n  }, [getGroups, searchInitialState]);\n  var selectedGroupsComponent = useCallback(function (_ref7) {\n    var data = _ref7.data;\n    return /*#__PURE__*/React.createElement(Typography, {\n      className: clsx(flexContainer),\n      variant: \"body1\"\n    }, /*#__PURE__*/React.createElement(Group, {\n      className: groupIcon\n    }), \" \", data.displayName);\n  }, [flexContainer, groupIcon]);\n  var handleOnSelectionChange = useCallback(function () {\n    if (typeof onSelectionChange == \"function\") {\n      onSelectionChange({});\n    }\n  }, [onSelectionChange]);\n  var searchInitialState = {\n    sortBy: \"name\",\n    start: 0,\n    size: 20,\n    search: \"\",\n    sortDirection: \"asc\",\n    filterType: [\"createdByDisplayName\", \"groupName\", \"groupEmail\"]\n  };\n  var sortGroups = useCallback(function (searchParams) {\n    getGroups(searchParams, true);\n  }, [getGroups]);\n  var getMoreGroups = useCallback(function (searchParams) {\n    getGroups(searchParams);\n  }, [getGroups]);\n  var searchGroups = useCallback(function (searchTerm) {\n    getGroups({\n      search: searchTerm,\n      startIndex: 0\n    }, true);\n  }, [getGroups]);\n  var getGroups = useCallback(function (searchParams, clear) {\n    var clearWhenDone = !!clear;\n    var startIndex = searchParams.startIndex;\n\n    if (typeof clearSelected === \"function\") {\n      clearSelected();\n    }\n\n    setSearch(function (currSearch) {\n      var start = currSearch.start;\n      var newSearch = Object.assign(Object.assign(Object.assign({}, currSearch), searchParams), {\n        start: _typeof(startIndex) === undefined ? start : startIndex\n      });\n      getOrgGroups(Object.assign({\n        organization: organization\n      }, newSearch)).then(function (resp) {\n        //it's important total of the state is set before getting the new elements\n        setSearch(function (currSearch) {\n          return Object.assign(Object.assign({}, currSearch), {\n            total: resp.recordsTotal || undefined\n          });\n        });\n        setGroups(function (currGroups) {\n          var _a;\n\n          var newGroups = clearWhenDone ? [] : _toConsumableArray(currGroups);\n\n          if ((_a = resp === null || resp === void 0 ? void 0 : resp.data) === null || _a === void 0 ? void 0 : _a.length) {\n            newGroups = newGroups.concat(resp.data.map(function (usr) {\n              var displayName = usr.displayName,\n                  groupEmail = usr.groupEmail,\n                  description = usr.description,\n                  nodeId = usr.nodeId,\n                  createdBy = usr.createdBy,\n                  createdByDisplayName = usr.createdByDisplayName;\n              return {\n                displayName: displayName,\n                groupEmail: groupEmail,\n                description: description,\n                nodeId: nodeId,\n                createdBy: createdBy,\n                createdByDisplayName: createdByDisplayName,\n                editable: permisions.includes(\"allow-manage-write\")\n              };\n            }));\n          }\n\n          return newGroups;\n        });\n        setShowLoading(false);\n      }, function (err) {\n        setShowLoading(false);\n        closeDialog();\n        handleError(err, t(\"gettingGroups\"));\n      });\n      return newSearch;\n    });\n  }, [clearSelected, closeDialog, handleError, organization, permisions]);\n  var getPermisions = useCallback(function () {\n    if (!repoId) {\n      return;\n    }\n\n    var aces = [];\n    var nodePath = [repoId, \"EC:IAM\", \"Groups\"];\n    checkACL({\n      nodePath: nodePath\n    }).then(function (resp) {\n      var _a;\n\n      if (((_a = resp === null || resp === void 0 ? void 0 : resp.aces) === null || _a === void 0 ? void 0 : _a.length) && resp.aces[0].ace) {\n        aces = resp.aces[0].ace.split(\"|\");\n      }\n\n      setPermisions(aces);\n    }, function (err) {\n      handleError(err, t(\"gettingPermisions\"));\n    });\n  }, [handleError, repoId]);\n  var allowManageCreate = useCallback(function () {\n    return permisions.indexOf(\"allow-manage-create\") > -1;\n  }, [permisions]);\n  var allowManageDelete = useCallback(function (selected) {\n    return Array.isArray(selected) && selected.length > 0 && permisions.indexOf(\"allow-manage-delete\") > -1;\n  }, [permisions]);\n  var allowManageEdit = useCallback(function (selected) {\n    return Array.isArray(selected) && selected.length == 1 && permisions.indexOf(\"allow-manage-write\") > -1;\n  }, [permisions]);\n  var actionButtons = [{\n    icon: /*#__PURE__*/React.createElement(Delete, null),\n    label: t(\"deleteGroup_plural\"),\n    condition: allowManageDelete,\n    onClick: showDeleteGroupsDialog,\n    title: t(\"deleteGroup_plural\")\n  }, {\n    icon: /*#__PURE__*/React.createElement(EditTwoToneIcon, null),\n    label: t(\"manageGroupMembers\"),\n    condition: allowManageEdit,\n    onClick: showManageGroupMemebrsDialog,\n    title: t(\"manageGroupMembers\")\n  }, {\n    icon: /*#__PURE__*/React.createElement(Add, null),\n    label: t(\"addGroup\"),\n    onClick: showAddGroupDialog,\n    condition: allowManageCreate,\n    title: t(\"addGroup\"),\n    color: \"primary\"\n  }];\n  useEffect(function () {\n    if (repoId && isFetching) {\n      if (!showLoading) {\n        setShowLoading(true);\n      }\n\n      getPermisions();\n      setGroups([]);\n      getGroups(searchInitialState);\n      setIsFetching(false);\n    }\n  }, [getGroups, getPermisions, isFetching, repoId, searchInitialState, showLoading]);\n  var searchResultMessage = useCallback(function () {\n    var messageComponent;\n\n    if (search.search) {\n      messageComponent = function messageComponent(_ref8) {\n        var loaded = _ref8.loaded;\n        return \"( \".concat(t(\"countObjectsFound\", {\n          count: loaded,\n          object: t(\"group\", {\n            count: loaded\n          })\n        }), \" )\");\n      };\n    } else {\n      messageComponent = function messageComponent(_ref9) {\n        var total = _ref9.total,\n            loaded = _ref9.loaded;\n        var message;\n\n        if (!loaded) {\n          message = \"( \".concat(t(\"noGroupsToDisplay\"), \")\");\n        } else {\n          message = \"( \".concat(t(\"showingCountOfTotalObjects\", {\n            count: loaded,\n            total: total,\n            object: t(\"group\", {\n              count: loaded\n            })\n          }), \" )\");\n        }\n\n        return message;\n      };\n    }\n\n    return messageComponent;\n  }, [search.search]);\n  useEffect(function () {\n    setIsFetching(true);\n  }, [organization]);\n  return /*#__PURE__*/React.createElement(I18nextProvider, {\n    i18n: i18next\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx(classes.groupsContainer)\n  }, repoId && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(LoadingBackdrop, {\n    className: classes.backdrop,\n    open: showLoading\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\"\n  })), /*#__PURE__*/React.createElement(DataView, {\n    list: groups,\n    actions: actionButtons,\n    selectable: \"multiple\",\n    onSelectionChange: handleOnSelectionChange,\n    onSearchChange: searchGroups,\n    selectableKey: \"nodeId\",\n    heightOfsset: 110,\n    sortBy: search.sortBy,\n    sortDirection: search.sortDirection,\n    sortMethod: sortGroups,\n    loadMoreRows: getMoreGroups,\n    total: search.total,\n    resultsMessage: searchResultMessage(),\n    selectedComponent: selectedGroupsComponent,\n    columns: [{\n      widthTake: 0.25,\n      label: t(\"group\"),\n      dataKey: \"displayName\",\n      cellRenderer: function cellRenderer(props) {\n        return /*#__PURE__*/React.createElement(GroupCell, Object.assign({}, props));\n      }\n    }, {\n      widthTake: 0.2,\n      label: t(\"email\"),\n      dataKey: \"groupEmail\"\n    }, {\n      widthTake: 0.2,\n      label: t(\"createdBy\"),\n      dataKey: \"createdByDisplayName\",\n      cellRenderer: function cellRenderer(props) {\n        return /*#__PURE__*/React.createElement(CreatedByCell, Object.assign({}, props));\n      }\n    }, {\n      widthTake: 0.35,\n      label: t(\"description\"),\n      dataKey: \"description\",\n      cellRenderer: function cellRenderer(props) {\n        return /*#__PURE__*/React.createElement(LongTextCell, Object.assign({}, props));\n      },\n      disableSort: true\n    }]\n  }), showAddGroup && /*#__PURE__*/React.createElement(AddGroupDialog, Object.assign({\n    open: showAddGroup,\n    handleOnClose: cancelAddGroupDialog,\n    handleAddGroup: handleAddGroup,\n    t: t\n  }, savedAddGroupFormData)), showDeleteGroup && /*#__PURE__*/React.createElement(DeleteGroupDialog, {\n    open: showDeleteGroup,\n    handleOnClose: closeDialog,\n    handleDelete: handleDeleteGroups,\n    selectedRowData: selectedRowData,\n    t: t,\n    handleRemoveFromDelete: handleRemoveFromDelete\n  }), showManageMembers && /*#__PURE__*/React.createElement(ManageGroupMembersDialog, {\n    open: showManageMembers,\n    organization: organization,\n    handleOnClose: closeDialog,\n    handleOnUsersAddedToGroup: refreshList,\n    selectedGroupRow: selectedRows,\n    selectedGroupData: selectedRowData,\n    t: t,\n    handleError: handleError,\n    repoId: repoId\n  }), errorDialog && /*#__PURE__*/React.createElement(MuiDialog, Object.assign({}, errorDialog)))));\n};\n\nGroups.propTypes = {\n  onSelectionChange: PropTypes.func,\n  organization: PropTypes.string,\n  onError: PropTypes.bool,\n  classes: PropTypes.objectOf(PropTypes.string),\n  repoId: PropTypes.string,\n  language: PropTypes.string\n};\nexport default withStyles(styles)(Groups);","map":{"version":3,"sources":["../../../../src/components/Groups/groups.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Backdrop, CircularProgress, Typography } from \"@material-ui/core\";\nimport { Button, GroupCell, CreatedByCell, LongTextCell } from \"@esko/cloud-ui-components\";\nimport Group from \"@material-ui/icons/Group\";\nimport EditTwoToneIcon from \"@material-ui/icons/EditTwoTone\";\nimport Delete from \"@material-ui/icons/Delete\";\nimport Add from \"@material-ui/icons/Add\";\nimport { DataView } from \"@esko/cloud-ui-components\";\nimport AddGroupDialog from \"./addGroupDialog\";\nimport ManageGroupMembersDialog from \"./manageGroupMembersDialog\";\nimport DeleteGroupDialog from \"./deleteGroupDialog\";\nimport { getOrgGroups, addOrgGroup, deleteOrgGroups } from \"../../data/requests/iam\";\nimport useEventBus from \"../../utils/hooks/useEventBus\";\nimport { checkACL } from \"../../data/requests/repo\";\nimport MuiDialog from \"../Dialog/dialog\";\nimport { useComponentsTranslation } from \"../../i18n/useComponentsTranslation\";\nimport { useTranslation } from \"react-i18next\";\nconst styles = theme => ({\n    groupsContainer: {\n        boxSizing: \"border-box\",\n        width: \"100%\",\n        height: \"100%\",\n        padding: theme.spacing(1)\n    },\n    flexContainer: {\n        display: \"flex\",\n        alignItems: \"center\",\n        boxSizing: \"border-box\"\n    },\n    groupIcon: {\n        marginRight: theme.spacing(1)\n    }\n});\nconst LoadingBackdrop = withStyles({\n    root: {\n        position: \"absolute\",\n        zIndex: 1\n    }\n})(Backdrop);\nconst Groups = ({ onSelectionChange, organization, onError, classes, repoId, language }) => {\n    const { groupIcon, flexContainer } = classes;\n    const [permisions, setPermisions] = React.useState([]);\n    const [showLoading, setShowLoading] = useState(false);\n    const [groups, setGroups] = useState([]);\n    const [search, setSearch] = useState({});\n    const [dialogState, setDialogState] = useState({\n        showAddGroup: false,\n        showManageMembers: false,\n        showDeleteGroup: false,\n        selectedRows: [],\n        selectedRowData: {},\n        clearSelected: null,\n        addGroupFormData: {}\n    });\n    const { showAddGroup, showManageMembers, showDeleteGroup, selectedRows, selectedRowData, clearSelected } = dialogState;\n    const { i18next, updatei18next, I18nextProvider } = useComponentsTranslation();\n    const { t } = useTranslation(\"components\");\n    React.useEffect(() => {\n        updatei18next(language);\n    }, [language]);\n    const [savedAddGroupFormData, setSavedAddGroupFormData] = useState({ presetName: \"\", presetDescription: \"\", presetEmail: \"\" });\n    const [errorDialog, setErrorDialog] = useState({\n        open: false,\n        content: \"\",\n        type: \"\",\n        actions: \"\"\n    });\n    const [isFetching, setIsFetching] = useState(false);\n    const closeErrorDialog = useCallback(() => {\n        setErrorDialog(prevState => (Object.assign(Object.assign({}, prevState), { open: false })));\n    }, []);\n    const reloadAddGroupDialog = useCallback(() => {\n        closeErrorDialog();\n        showAddGroupDialog({ clearSelected });\n    }, [clearSelected, closeErrorDialog, showAddGroupDialog]);\n    const cancelAddGroupDialog = useCallback(() => {\n        setSavedAddGroupFormData({ presetName: \"\", presetDescription: \"\", presetEmail: \"\" });\n        closeDialog();\n    }, [closeDialog]);\n    const closeDialog = useCallback(() => {\n        setDialogState(prevState => (Object.assign(Object.assign({}, prevState), { showAddGroup: false, showManageMembers: false, showDeleteGroup: false, selectedRows: [], selectedRowData: {} })));\n    }, []);\n    const showAddGroupDialog = useCallback(({ clearSelected }) => {\n        setDialogState({\n            showAddGroup: true,\n            showManageMembers: false,\n            showDeleteGroup: false,\n            selectedRows: [],\n            selectedRowData: {},\n            clearSelected: clearSelected\n        });\n    }, []);\n    const showManageGroupMemebrsDialog = ({ selected, selectedRowData }) => {\n        setDialogState({\n            showAddGroup: false,\n            showManageMembers: true,\n            showDeleteGroup: false,\n            selectedRows: selected,\n            selectedRowData: selectedRowData,\n            clearSelected: null\n        });\n    };\n    const showDeleteGroupsDialog = ({ clearSelected, selected, selectedRowData }) => {\n        setDialogState({\n            showAddGroup: false,\n            showManageMembers: false,\n            showDeleteGroup: true,\n            selectedRows: selected,\n            selectedRowData: selectedRowData,\n            clearSelected: clearSelected\n        });\n    };\n    const socket = useRef();\n    const openSocket = useCallback(() => (socket.current = useEventBus({ path: `${repoId}/EC:IAM/Groups` })), [repoId, socket]);\n    const closeSocket = () => { var _a, _b; return (((_a = socket.current) === null || _a === void 0 ? void 0 : _a.close) ? (_b = socket.current) === null || _b === void 0 ? void 0 : _b.close() : false); };\n    useEffect(() => {\n        if (repoId) {\n            openSocket();\n        }\n        return () => closeSocket();\n    }, [openSocket, repoId]);\n    const setRefreshListener = ({ callbackId, callback = msg => console.log(msg) }) => {\n        socket.current.listen(callback, callbackId);\n    };\n    const setDeleteEventListeners = useCallback(({ eventListeners }) => {\n        if (socket.current) {\n            for (const callback in eventListeners) {\n                setRefreshListener({\n                    callbackId: callback,\n                    callback: eventListeners[callback]\n                });\n            }\n        }\n        else {\n            refreshList();\n            closeDialog();\n        }\n    }, [closeDialog, refreshList]);\n    const handleAddGroup = useCallback(formState => {\n        setShowLoading(true);\n        closeDialog();\n        let { name: { value: groupName }, description: { value: groupDescription }, email: { value: groupEmail } } = formState;\n        if (socket.current) {\n            const path = `${repoId}/EC:IAM/Groups/` + encodeURI(groupName);\n            setRefreshListener({\n                callbackId: path,\n                callback: msg => {\n                    const jsonMsg = JSON.parse(msg.data);\n                    if (jsonMsg.path === path) {\n                        socket.current.stopListening(path);\n                        setSavedAddGroupFormData({ presetName: \"\", presetDescription: \"\", presetEmail: \"\" });\n                        setIsFetching(true);\n                    }\n                }\n            });\n        }\n        addOrgGroup({ organization, groupName, groupDescription, groupEmail }).then(() => {\n            if (!socket.current) {\n                closeDialog();\n                setIsFetching(true);\n            }\n        }, err => {\n            setShowLoading(false);\n            closeDialog();\n            setSavedAddGroupFormData({ presetName: groupName, presetDescription: groupDescription, presetEmail: groupEmail });\n            handleError(err, err.status);\n        });\n    }, [closeDialog, handleError, organization, repoId]);\n    const handleDeleteGroups = useCallback(() => {\n        let groupsToDelete = [];\n        let eventListeners = {};\n        let eventIds = Object.keys(selectedRowData);\n        setShowLoading(true);\n        closeDialog();\n        for (const groupId in selectedRowData) {\n            groupsToDelete.push({ name: selectedRowData[groupId].displayName });\n            if (socket.current) {\n                eventListeners[groupId] = msg => {\n                    const jsonMsg = JSON.parse(msg.data);\n                    const payload = jsonMsg.payload[0];\n                    const eventIdIndex = eventIds.indexOf(payload);\n                    if (eventIdIndex !== -1) {\n                        socket.current.stopListening(payload);\n                        eventIds.splice(eventIdIndex, 1);\n                    }\n                    if (!eventIds.length) {\n                        setIsFetching(true);\n                    }\n                };\n            }\n        }\n        if (socket.current) {\n            setDeleteEventListeners({ eventListeners });\n        }\n        deleteOrgGroups({ organization, groupsToDelete }).then(() => {\n            if (!socket.current) {\n                closeDialog();\n                setIsFetching(true);\n            }\n        }, err => {\n            setShowLoading(false);\n            closeDialog();\n            handleError(err, \"Getting Groups\");\n        });\n    }, [closeDialog, handleError, organization, selectedRowData, setDeleteEventListeners]);\n    const handleRemoveFromDelete = useCallback(groupId => {\n        const newSelectedRowData = Object.assign({}, selectedRowData);\n        delete newSelectedRowData[groupId];\n        setDialogState(prevState => (Object.assign(Object.assign({}, prevState), { selectedRowData: newSelectedRowData })));\n    }, [selectedRowData]);\n    const handleError = useCallback((err, errorType) => {\n        if (typeof onError === \"function\") {\n            onError(err);\n        }\n        else {\n            const errors = {\n                409: t(\"groupAlreadyExists\"),\n                401: t(\"essionExpired\"),\n                400: `${t(\"fieldsContainInvalidValues\")} ${t(\"messageFromServer\")}: `\n            };\n            err.json().then(errorMsgJson => {\n                setErrorDialog(prevState => (Object.assign(Object.assign({}, prevState), { open: true, content: React.createElement(Typography, { variant: \"h5\" }, errors[errorType] + JSON.stringify(errorMsgJson)), themeSpecificStyleHook: \"useErrorStyles\", actions: (React.createElement(Button, { color: \"primary\", onClick: closeErrorDialog }, t(\"close\"))) })));\n            }, () => {\n                const errorDialogCallback = errorType == 409 ? reloadAddGroupDialog : closeErrorDialog;\n                setErrorDialog(prevState => (Object.assign(Object.assign({}, prevState), { open: true, content: React.createElement(Typography, { variant: \"h5\" }, errors[errorType]), themeSpecificStyleHook: \"useErrorStyles\", actions: (React.createElement(Button, { color: \"primary\", onClick: errorDialogCallback }, t(\"close\"))) })));\n            });\n        }\n    }, [closeErrorDialog, reloadAddGroupDialog, onError]);\n    const refreshList = useCallback(() => {\n        setGroups([]);\n        getGroups(searchInitialState);\n    }, [getGroups, searchInitialState]);\n    const selectedGroupsComponent = useCallback(({ data }) => {\n        return (React.createElement(Typography, { className: clsx(flexContainer), variant: \"body1\" },\n            React.createElement(Group, { className: groupIcon }),\n            \" \",\n            data.displayName));\n    }, [flexContainer, groupIcon]);\n    const handleOnSelectionChange = useCallback(() => {\n        if (typeof onSelectionChange == \"function\") {\n            onSelectionChange({});\n        }\n    }, [onSelectionChange]);\n    const searchInitialState = {\n        sortBy: \"name\",\n        start: 0,\n        size: 20,\n        search: \"\",\n        sortDirection: \"asc\",\n        filterType: [\"createdByDisplayName\", \"groupName\", \"groupEmail\"]\n    };\n    const sortGroups = useCallback(searchParams => {\n        getGroups(searchParams, true);\n    }, [getGroups]);\n    const getMoreGroups = useCallback(searchParams => {\n        getGroups(searchParams);\n    }, [getGroups]);\n    const searchGroups = useCallback(searchTerm => {\n        getGroups({\n            search: searchTerm,\n            startIndex: 0\n        }, true);\n    }, [getGroups]);\n    const getGroups = useCallback((searchParams, clear) => {\n        const clearWhenDone = !!clear;\n        const { startIndex } = searchParams;\n        if (typeof clearSelected === \"function\") {\n            clearSelected();\n        }\n        setSearch(currSearch => {\n            const { start } = currSearch;\n            const newSearch = Object.assign(Object.assign(Object.assign({}, currSearch), searchParams), { start: typeof startIndex === undefined ? start : startIndex });\n            getOrgGroups(Object.assign({ organization }, newSearch)).then(resp => {\n                //it's important total of the state is set before getting the new elements\n                setSearch(currSearch => (Object.assign(Object.assign({}, currSearch), { total: resp.recordsTotal || undefined })));\n                setGroups(currGroups => {\n                    var _a;\n                    let newGroups = clearWhenDone ? [] : [...currGroups];\n                    if ((_a = resp === null || resp === void 0 ? void 0 : resp.data) === null || _a === void 0 ? void 0 : _a.length) {\n                        newGroups = newGroups.concat(resp.data.map(usr => {\n                            const { displayName, groupEmail, description, nodeId, createdBy, createdByDisplayName } = usr;\n                            return {\n                                displayName,\n                                groupEmail,\n                                description,\n                                nodeId,\n                                createdBy,\n                                createdByDisplayName,\n                                editable: permisions.includes(\"allow-manage-write\")\n                            };\n                        }));\n                    }\n                    return newGroups;\n                });\n                setShowLoading(false);\n            }, err => {\n                setShowLoading(false);\n                closeDialog();\n                handleError(err, t(\"gettingGroups\"));\n            });\n            return newSearch;\n        });\n    }, [clearSelected, closeDialog, handleError, organization, permisions]);\n    const getPermisions = useCallback(() => {\n        if (!repoId) {\n            return;\n        }\n        let aces = [];\n        const nodePath = [repoId, \"EC:IAM\", \"Groups\"];\n        checkACL({ nodePath }).then(resp => {\n            var _a;\n            if (((_a = resp === null || resp === void 0 ? void 0 : resp.aces) === null || _a === void 0 ? void 0 : _a.length) && resp.aces[0].ace) {\n                aces = resp.aces[0].ace.split(\"|\");\n            }\n            setPermisions(aces);\n        }, err => {\n            handleError(err, t(\"gettingPermisions\"));\n        });\n    }, [handleError, repoId]);\n    const allowManageCreate = useCallback(() => {\n        return permisions.indexOf(\"allow-manage-create\") > -1;\n    }, [permisions]);\n    const allowManageDelete = useCallback(selected => {\n        return Array.isArray(selected) && selected.length > 0 && permisions.indexOf(\"allow-manage-delete\") > -1;\n    }, [permisions]);\n    const allowManageEdit = useCallback(selected => {\n        return Array.isArray(selected) && selected.length == 1 && permisions.indexOf(\"allow-manage-write\") > -1;\n    }, [permisions]);\n    const actionButtons = [\n        {\n            icon: React.createElement(Delete, null),\n            label: t(\"deleteGroup_plural\"),\n            condition: allowManageDelete,\n            onClick: showDeleteGroupsDialog,\n            title: t(\"deleteGroup_plural\")\n        },\n        {\n            icon: React.createElement(EditTwoToneIcon, null),\n            label: t(\"manageGroupMembers\"),\n            condition: allowManageEdit,\n            onClick: showManageGroupMemebrsDialog,\n            title: t(\"manageGroupMembers\")\n        },\n        {\n            icon: React.createElement(Add, null),\n            label: t(\"addGroup\"),\n            onClick: showAddGroupDialog,\n            condition: allowManageCreate,\n            title: t(\"addGroup\"),\n            color: \"primary\"\n        }\n    ];\n    useEffect(() => {\n        if (repoId && isFetching) {\n            if (!showLoading) {\n                setShowLoading(true);\n            }\n            getPermisions();\n            setGroups([]);\n            getGroups(searchInitialState);\n            setIsFetching(false);\n        }\n    }, [getGroups, getPermisions, isFetching, repoId, searchInitialState, showLoading]);\n    const searchResultMessage = useCallback(() => {\n        let messageComponent;\n        if (search.search) {\n            messageComponent = ({ loaded }) => `( ${t(\"countObjectsFound\", { count: loaded, object: t(\"group\", { count: loaded }) })} )`;\n        }\n        else {\n            messageComponent = ({ total, loaded }) => {\n                let message;\n                if (!loaded) {\n                    message = `( ${t(\"noGroupsToDisplay\")})`;\n                }\n                else {\n                    message = `( ${t(\"showingCountOfTotalObjects\", { count: loaded, total, object: t(\"group\", { count: loaded }) })} )`;\n                }\n                return message;\n            };\n        }\n        return messageComponent;\n    }, [search.search]);\n    useEffect(() => {\n        setIsFetching(true);\n    }, [organization]);\n    return (React.createElement(I18nextProvider, { i18n: i18next },\n        React.createElement(\"div\", { className: clsx(classes.groupsContainer) }, repoId && (React.createElement(React.Fragment, null,\n            React.createElement(LoadingBackdrop, { className: classes.backdrop, open: showLoading },\n                React.createElement(CircularProgress, { color: \"inherit\" })),\n            React.createElement(DataView, { list: groups, actions: actionButtons, selectable: \"multiple\", onSelectionChange: handleOnSelectionChange, onSearchChange: searchGroups, selectableKey: \"nodeId\", heightOfsset: 110, sortBy: search.sortBy, sortDirection: search.sortDirection, sortMethod: sortGroups, loadMoreRows: getMoreGroups, total: search.total, resultsMessage: searchResultMessage(), selectedComponent: selectedGroupsComponent, columns: [\n                    {\n                        widthTake: 0.25,\n                        label: t(\"group\"),\n                        dataKey: \"displayName\",\n                        cellRenderer: props => React.createElement(GroupCell, Object.assign({}, props))\n                    },\n                    {\n                        widthTake: 0.2,\n                        label: t(\"email\"),\n                        dataKey: \"groupEmail\"\n                    },\n                    {\n                        widthTake: 0.2,\n                        label: t(\"createdBy\"),\n                        dataKey: \"createdByDisplayName\",\n                        cellRenderer: props => React.createElement(CreatedByCell, Object.assign({}, props))\n                    },\n                    {\n                        widthTake: 0.35,\n                        label: t(\"description\"),\n                        dataKey: \"description\",\n                        cellRenderer: props => React.createElement(LongTextCell, Object.assign({}, props)),\n                        disableSort: true\n                    }\n                ] }),\n            showAddGroup && (React.createElement(AddGroupDialog, Object.assign({ open: showAddGroup, handleOnClose: cancelAddGroupDialog, handleAddGroup: handleAddGroup, t: t }, savedAddGroupFormData))),\n            showDeleteGroup && (React.createElement(DeleteGroupDialog, { open: showDeleteGroup, handleOnClose: closeDialog, handleDelete: handleDeleteGroups, selectedRowData: selectedRowData, t: t, handleRemoveFromDelete: handleRemoveFromDelete })),\n            showManageMembers && (React.createElement(ManageGroupMembersDialog, { open: showManageMembers, organization: organization, handleOnClose: closeDialog, handleOnUsersAddedToGroup: refreshList, selectedGroupRow: selectedRows, selectedGroupData: selectedRowData, t: t, handleError: handleError, repoId: repoId })),\n            errorDialog && React.createElement(MuiDialog, Object.assign({}, errorDialog)))))));\n};\nGroups.propTypes = {\n    onSelectionChange: PropTypes.func,\n    organization: PropTypes.string,\n    onError: PropTypes.bool,\n    classes: PropTypes.objectOf(PropTypes.string),\n    repoId: PropTypes.string,\n    language: PropTypes.string\n};\nexport default withStyles(styles)(Groups);\n//# sourceMappingURL=groups.js.map"]},"metadata":{},"sourceType":"module"}