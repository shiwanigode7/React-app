{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useState, useContext, Suspense } from \"react\";\nimport clsx from \"clsx\";\nimport Proptypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport AppsIcon from \"@material-ui/icons/Apps\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { getOrganizations } from \"../../data/requests/iam\";\nimport { arrangeSitesByOrgWithAvailableApps, fetchAppSites } from \"../../data/requests/sites\";\nimport { ListItemText, useMediaQuery, IconButton, Drawer, List, ListItemAvatar, Avatar, InputLabel, MenuItem, FormControl, Box, Divider, Typography, CircularProgress } from \"@material-ui/core\";\nimport ConditionalWrapper from \"../../utils/ConditionalWrapper\";\nimport { sortArrayByStringProp } from \"../../utils/strings\";\nimport { ComponentsDataContext, Select, LegalBadge, Link } from \"@esko/cloud-ui-components\";\nimport { EskoLogo } from \"../../images/product-logos\";\nimport { useComponentsTranslation } from \"../../i18n/useComponentsTranslation\";\nimport { useTranslation } from \"react-i18next\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    list: {\n      width: 250,\n      marginBottom: 10,\n      position: \"relative\",\n      paddingTop: 10\n    },\n    fullList: {\n      width: \"auto\"\n    },\n    closeIcon: {\n      position: \"absolute\",\n      top: theme.spacing(1),\n      right: theme.spacing(2),\n      zIndex: 10,\n      \"& > .MuiSvgIcon-root\": {\n        fontSize: 12\n      }\n    },\n    closeNetWorkIcon: {\n      position: \"absolute\",\n      top: 5,\n      left: 5,\n      \"& > .MuiSvgIcon-root\": {\n        fontSize: \"1.2rem\"\n      }\n    },\n    appAnchor: {\n      textDecoration: \"none\",\n      color: \"inherit\",\n      \"&:hover\": {\n        textDecoration: \"none\",\n        color: \"inherit\"\n      }\n    },\n    legalBadge: {\n      backgroundColor: \"inherit\",\n      width: \"100%\",\n      marginTop: theme.spacing(5)\n    },\n    absolutePositioning: {\n      position: \"absolute\",\n      bottom: 0,\n      marginTop: 0\n    },\n    appsButton: {\n      minWidth: 48,\n      minHeight: 48,\n      display: \"flex\",\n      justifyContent: \"center\"\n    },\n    orgSeparator: {\n      pointerEvents: \"none\",\n      opacity: 0.8\n    },\n    appSwitcherPaper: {\n      overflowX: \"hidden\",\n      scrollbarWidth: \"thin\"\n    },\n    singleNavValue: {\n      marginTop: 20,\n      minWidth: 0,\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\"\n    },\n    hiddenLogo: {\n      display: \"none\",\n      \"& + $defaultLogo\": {\n        display: \"flex\"\n      }\n    },\n    defaultLogo: {\n      display: \"none\",\n      transform: \"scale(1.2)\"\n    },\n    listLink: {\n      display: \"flex\",\n      alignItems: \"center\",\n      textAlign: \"left\"\n    }\n  };\n});\nexport default function AppSwitcher(_ref) {\n  var organization = _ref.organization,\n      workspace = _ref.workspace,\n      _ref$showNavigation = _ref.showNavigation,\n      showNavigation = _ref$showNavigation === void 0 ? true : _ref$showNavigation,\n      _ref$onClick = _ref.onClick,\n      onClick = _ref$onClick === void 0 ? false : _ref$onClick,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,\n      bottomContent = _ref.bottomContent,\n      showLegalBadge = _ref.showLegalBadge,\n      _ref$legalBadge = _ref.legalBadge,\n      legalBadge = _ref$legalBadge === void 0 ? {} : _ref$legalBadge,\n      _ref$onError = _ref.onError,\n      onError = _ref$onError === void 0 ? function (err) {\n    return console.log(\"Error on request:\", err);\n  } : _ref$onError,\n      onAddWorkspace = _ref.onAddWorkspace,\n      language = _ref.language;\n  var compData = useContext(ComponentsDataContext);\n  var classes = useStyles();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      drawerState = _React$useState2[0],\n      setDrawerState = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      networkDrawerState = _React$useState4[0],\n      setNetworkDrawerState = _React$useState4[1];\n\n  var _useState = useState({\n    orgs: [],\n    workspaces: {},\n    organization: organization || \"\",\n    workspace: !!organization ? workspace || \"\" : \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _React$useState5 = React.useState({\n    users: true\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      myNetwork = _React$useState6[0],\n      setMyNetwork = _React$useState6[1];\n\n  var _useComponentsTransla = useComponentsTranslation(),\n      i18next = _useComponentsTransla.i18next,\n      updatei18next = _useComponentsTransla.updatei18next,\n      I18nextProvider = _useComponentsTransla.I18nextProvider;\n\n  var _useTranslation = useTranslation(\"components\"),\n      t = _useTranslation.t;\n\n  React.useEffect(function () {\n    updatei18next(language);\n  }, [language]);\n\n  var getWorkspaces = function getWorkspaces() {\n    fetchAppSites([state.organization]).then(function (results) {\n      var OrgWorkspaces = arrangeSitesByOrgWithAvailableApps(results);\n      var workspaces = OrgWorkspaces[state.organization] ? OrgWorkspaces[state.organization].map(function (workSp) {\n        var apps = workSp.apps,\n            name = workSp.workspace,\n            title = workSp.workspaceTitle,\n            others = __rest(workSp, [\"apps\", \"workspace\", \"workspaceTitle\"]);\n\n        return Object.assign({\n          apps: apps,\n          name: name,\n          title: title\n        }, others);\n      }) : [];\n      setState(function (currState) {\n        var keepWorkspace = workspaces.length == 1 ? _toConsumableArray(workspaces) : workspaces.filter(function (wks) {\n          return wks.name == currState.workspace;\n        });\n        var newState = Object.assign(Object.assign({}, currState), {\n          workspaces: _defineProperty({}, currState.organization, workspaces.sort(sortArrayByStringProp(\"title\", \"ASC\"))),\n          workspace: keepWorkspace[0] ? keepWorkspace[0].name : \"\"\n        });\n        onChange(Object.assign(Object.assign({}, newState), {\n          workspaces: newState.workspaces[currState.organization]\n        }));\n        return Object.assign({}, newState);\n      });\n    }, function (err) {\n      return onError(err);\n    });\n  }; //context kicks in\n\n\n  React.useEffect(function () {\n    if (compData && (compData.organization || compData.workspace)) {\n      setState(function (currState) {\n        var newState = Object.assign(Object.assign({}, currState), {\n          organization: organization || currState.organization || compData.organization,\n          workspace: workspace || currState.workspace || compData.workspace\n        });\n        return newState;\n      });\n    }\n  }, [compData]); //observer for when organization changes updates the workspaces belonging to it\n\n  React.useEffect(function () {\n    if (state.organization && !state.workspaces[state.organization]) {\n      getWorkspaces();\n    }\n  }, [state.organization, state.orgs, state.workspaces]);\n  React.useEffect(function () {\n    setState(function (currState) {\n      var newState = Object.assign(Object.assign({}, currState), {\n        organization: !organization || !currState.orgs.filter(function (org) {\n          return org.id === organization;\n        }).length ? \"\" : organization,\n        workspace: workspace\n      });\n      return newState;\n    });\n  }, [organization, workspace]);\n  React.useEffect(function () {\n    var keepingOrg = compData && compData.organization || organization;\n    var keepingWorkspace = compData && compData.workspace || workspace;\n\n    if (!drawerState) {\n      setState(function (currState) {\n        return Object.assign(Object.assign({}, currState), {\n          organization: keepingOrg,\n          workspace: keepingWorkspace\n        });\n      });\n    }\n  }, [drawerState]);\n  React.useEffect(function () {\n    getOrganizations().then(function (res) {\n      var data = Array.isArray(res.data) ? res.data.sort(sortArrayByStringProp(\"readableName\", \"ASC\")) : [];\n      var newOrgs = data.map(function (org) {\n        return {\n          repoid: org.repoid,\n          id: org.organizationID,\n          name: org.readableName,\n          workspaces: org.workspaces || 0\n        };\n      });\n      setState(function (currState) {\n        return Object.assign(Object.assign({}, currState), {\n          orgs: newOrgs\n        });\n      });\n    }, function (err) {\n      return onError(err);\n    });\n  }, []);\n\n  var handleOrganizationChange = function handleOrganizationChange(event) {\n    var _a;\n\n    if (!((_a = event === null || event === void 0 ? void 0 : event.target) === null || _a === void 0 ? void 0 : _a.value)) {\n      return;\n    }\n\n    setState(function (currState) {\n      return Object.assign(Object.assign({}, currState), {\n        organization: event.target.value\n      });\n    });\n  };\n\n  var handleWorkspaceChange = function handleWorkspaceChange(event) {\n    var newWorkspace = event.target.value || \"\";\n    var workspacesArr = state.workspaces[state.organization] || [];\n    onChange(Object.assign(Object.assign({}, state), {\n      workspaces: workspacesArr,\n      workspace: newWorkspace\n    }));\n    setState(function (currState) {\n      return Object.assign(Object.assign({}, currState), {\n        workspace: newWorkspace\n      });\n    });\n  };\n\n  var createAppURL = function createAppURL(appMet) {\n    var currentApp = window.location.host.split(\".\").splice(0, 1).join(\"\");\n    var appOrigin = window.location.origin.replace(currentApp, appMet.key);\n    var newAppURL = \"\".concat(appOrigin, \"/\").concat(appMet.urlFragment);\n    return newAppURL;\n  };\n\n  var createLogo = function createLogo(appMet) {\n    var currentApp = window.location.host.split(\".\").splice(0, 1).join(\"\");\n    var appOrigin = window.location.origin.replace(currentApp, appMet.key);\n    var appIconURL = \"\".concat(appOrigin, \"/\").concat(appMet.icon);\n\n    var setDefaultLogo = function setDefaultLogo(e) {\n      var elem = e.target;\n      elem.onerror = \"\";\n      elem.src = \"\";\n      elem.className = classes.hiddenLogo;\n      return true;\n    };\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n      width: 45,\n      height: 45,\n      src: appIconURL,\n      onError: setDefaultLogo\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: clsx(classes.defaultLogo)\n    }, \" \", /*#__PURE__*/React.createElement(EskoLogo, null), \" \"));\n  };\n\n  var onClickCallback = function onClickCallback(appMet) {\n    var newAppURL = createAppURL(appMet);\n    var selectedOrg = state.orgs.filter(function (orgItem) {\n      return orgItem.id == state.organization;\n    })[0];\n    var currWorkSpaces = state.workspaces[state.organization] || [];\n    var selectedWorkspace = currWorkSpaces.filter(function (wksItem) {\n      return wksItem.name == state.workspace;\n    })[0];\n    onClick({\n      organization: selectedOrg,\n      workspace: selectedWorkspace,\n      app: Object.assign({}, appMet),\n      appURL: newAppURL\n    });\n  };\n\n  var linkOrButton = function linkOrButton(appMet, idx) {\n    var linkProps = {\n      key: appMet.key,\n      title: appMet.name\n    };\n\n    if (typeof onClick == \"function\") {\n      linkProps.onClick = function () {\n        return onClickCallback(appMet);\n      };\n    }\n\n    var anchor = function anchor(children) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: \"anchor-\" + appMet.key + idx,\n        style: {\n          lineHeight: 1\n        },\n        className: classes.appAnchor,\n        href: createAppURL(appMet)\n      }, children);\n    };\n\n    return /*#__PURE__*/React.createElement(ConditionalWrapper, {\n      key: \"conditional-\" + appMet.key + idx,\n      condition: typeof onClick != \"function\",\n      wrapper: anchor\n    }, /*#__PURE__*/React.createElement(ListItem, Object.assign({\n      key: appMet.key + idx,\n      button: true\n    }, linkProps), /*#__PURE__*/React.createElement(ListItemAvatar, null, /*#__PURE__*/React.createElement(Avatar, null, createLogo(appMet))), /*#__PURE__*/React.createElement(ListItemText, {\n      primary: appMet.name\n    })));\n  };\n\n  var toggleDrawer = function toggleDrawer(open) {\n    return function (event) {\n      if (event && event.type === \"keydown\" && (event.key === \"Tab\" || event.key === \"Shift\")) {\n        return;\n      }\n\n      setDrawerState(open);\n    };\n  };\n\n  var toggleNetworkDrawer = function toggleNetworkDrawer(open) {\n    return function (event) {\n      if (event && event.type === \"keydown\" && (event.key === \"Tab\" || event.key === \"Shift\")) {\n        return;\n      }\n\n      console.log(open);\n      setNetworkDrawerState(open);\n    };\n  };\n\n  var renderSites = function renderSites() {\n    var currWorkSpaces = state.workspaces[state.organization] || [];\n\n    if (currWorkSpaces.length > 1) {\n      return /*#__PURE__*/React.createElement(FormControl, {\n        style: {\n          width: \"100%\"\n        }\n      }, /*#__PURE__*/React.createElement(InputLabel, {\n        shrink: false,\n        key: \"workspace-label\"\n      }, t(\"workspace_plural\")), /*#__PURE__*/React.createElement(Select, {\n        labelId: \"workspaces-label\",\n        id: \"workspaces\",\n        value: currWorkSpaces == 1 ? currWorkSpaces[0].id : state.workspace,\n        onChange: handleWorkspaceChange,\n        displayEmpty: true,\n        key: \"workspace-select\"\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        value: \"\"\n      }, t(\"pleaseSelect\")), currWorkSpaces.map(function (workspace) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          value: workspace.name,\n          key: workspace.name\n        }, workspace.title);\n      })));\n    } else {\n      var onlySite = currWorkSpaces[0];\n      return /*#__PURE__*/React.createElement(FormControl, {\n        style: {\n          width: \"100%\"\n        }\n      }, /*#__PURE__*/React.createElement(InputLabel, {\n        shrink: false\n      }, t(\"workspace\")), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h6\",\n        title: onlySite.title,\n        className: clsx(classes.singleNavValue)\n      }, onlySite.title));\n    }\n  };\n\n  var renderApps = function renderApps() {\n    var currWorkSpaces = state.workspaces[state.organization] || [];\n    var chosenWorkspace = currWorkSpaces && state.workspace ? currWorkSpaces.filter(function (wks) {\n      return wks.name == state.workspace;\n    }) : [];\n\n    if (chosenWorkspace[0] && chosenWorkspace[0].apps.length) {\n      var appsMeta = chosenWorkspace[0].apps.filter(function (app) {\n        return app;\n      }).sort(sortArrayByStringProp(\"name\", \"asc\"));\n      var appsButtons = appsMeta.map(function (appMet, idx) {\n        return linkOrButton(appMet, idx);\n      });\n\n      if (appsButtons.length) {\n        appsButtons.unshift( /*#__PURE__*/React.createElement(ListItem, {\n          key: \"apps-title\"\n        }, /*#__PURE__*/React.createElement(ListItemText, {\n          primary: t(\"apps\")\n        })));\n        appsButtons.push( /*#__PURE__*/React.createElement(ListItem, {\n          key: \"apps-divider\"\n        }, /*#__PURE__*/React.createElement(Divider, {\n          light: true\n        })));\n      }\n\n      return appsButtons;\n    }\n\n    return \"\";\n  };\n\n  var navigation = function navigation() {\n    var currWorkSpaces = state.workspaces[state.organization] || [];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListItem, null, /*#__PURE__*/React.createElement(FormControl, {\n      style: {\n        width: \"100%\"\n      }\n    }, !!state.orgs.length && /*#__PURE__*/React.createElement(InputLabel, {\n      shrink: false\n    }, t(\"organization\")), state.orgs.length > 1 && /*#__PURE__*/React.createElement(Select, {\n      labelId: \"orgs-label\",\n      id: \"orgs\",\n      value: state.organization,\n      onChange: handleOrganizationChange,\n      displayEmpty: true\n    }, !state.organization && /*#__PURE__*/React.createElement(MenuItem, {\n      value: \"\"\n    }, t(\"pleaseSelect\")), state.orgs.map(function (orgItem) {\n      return /*#__PURE__*/React.createElement(MenuItem, {\n        value: orgItem.id,\n        key: orgItem.id\n      }, orgItem.name);\n    })), state.orgs.length == 1 && /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      title: state.orgs[0].name,\n      className: clsx(classes.singleNavValue)\n    }, state.orgs[0].name))), !!currWorkSpaces.length && /*#__PURE__*/React.createElement(ListItem, null, renderSites()));\n  };\n\n  var renderAddWorkspaceLink = function renderAddWorkspaceLink(addWorkspaceCallback) {\n    var validCallback = typeof addWorkspaceCallback === \"function\";\n    var organization = state.organization;\n    var organizations = state.orgs;\n\n    if (validCallback) {\n      return /*#__PURE__*/React.createElement(ListItem, null, /*#__PURE__*/React.createElement(ListItemText, {\n        primary: /*#__PURE__*/React.createElement(Link, {\n          component: \"button\",\n          color: \"inherit\",\n          onClick: function onClick() {\n            return addWorkspaceCallback({\n              organization: organization,\n              organizations: organizations\n            });\n          },\n          className: clsx(classes.listLink),\n          startIcon: /*#__PURE__*/React.createElement(AddIcon, null)\n        }, t(\"addNewWorkspace\"))\n      }));\n    }\n  };\n\n  var highToAbsolute = useMediaQuery(\"(min-height:600px)\");\n  return /*#__PURE__*/React.createElement(I18nextProvider, {\n    i18n: i18next\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 32\n    })\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Box, {\n    className: clsx(classes.appsButton)\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: toggleDrawer(true)\n  }, /*#__PURE__*/React.createElement(AppsIcon, {\n    style: {\n      fontSize: \"1.5rem\"\n    }\n  }))), /*#__PURE__*/React.createElement(Drawer, {\n    anchor: \"left\",\n    open: drawerState,\n    onClose: toggleDrawer(false),\n    PaperProps: {\n      className: classes.appSwitcherPaper\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.list,\n    role: \"presentation\"\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: classes.closeIcon,\n    onClick: function onClick() {\n      toggleNetworkDrawer(false)();\n      toggleDrawer(false)();\n    },\n    size: \"small\"\n  }, /*#__PURE__*/React.createElement(CloseIcon, {\n    fontSize: \"inherit\"\n  })), /*#__PURE__*/React.createElement(List, null, showNavigation && navigation(), !state.orgs.length && /*#__PURE__*/React.createElement(ListItem, null, /*#__PURE__*/React.createElement(ListItemText, null, t(\"errorMessages.noObjectFound_plural\", {\n    object: t(\"organization_plural\")\n  }))), !!state.orgs.length && state.organization && !!state.workspaces[state.organization] && !state.workspaces[state.organization].length && /*#__PURE__*/React.createElement(ListItem, null, /*#__PURE__*/React.createElement(ListItemText, null, t(\"errorMessages.noObjectFound_plural\", {\n    object: t(\"workspace_plural\")\n  }))), renderAddWorkspaceLink(onAddWorkspace), !!state.orgs.length && state.organization && state.workspace && /*#__PURE__*/React.createElement(React.Fragment, null, renderApps()))), !!bottomContent && (typeof bottomContent === \"function\" ? bottomContent(function () {\n    setDrawerState(false);\n  }) : bottomContent), !!showLegalBadge && /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.legalBadge, _defineProperty({}, classes.absolutePositioning, highToAbsolute))\n  }, /*#__PURE__*/React.createElement(LegalBadge, Object.assign({}, legalBadge)))))));\n}\nAppSwitcher.propTypes = {\n  organization: Proptypes.string,\n  workspace: Proptypes.string,\n  showNavigation: Proptypes.bool,\n  showLegalBadge: Proptypes.bool,\n  legalBadge: Proptypes.shape({\n    size: Proptypes.string,\n    minimal: Proptypes.bool,\n    links: Proptypes.arrayOf(Proptypes.shape({\n      url: Proptypes.string,\n      display: Proptypes.string\n    })),\n    logo: Proptypes.node,\n    line1: Proptypes.string,\n    line2: Proptypes.string\n  }),\n  bottomContent: Proptypes.oneOfType([Proptypes.node, Proptypes.func]),\n  onClick: Proptypes.func,\n  onChange: Proptypes.func,\n  onAddWorkspace: Proptypes.func,\n  onError: Proptypes.func,\n  language: Proptypes.string\n};","map":{"version":3,"sources":["../../../../src/components/AppSwitcher/index.js"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useState, useContext, Suspense } from \"react\";\nimport clsx from \"clsx\";\nimport Proptypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport AppsIcon from \"@material-ui/icons/Apps\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { getOrganizations } from \"../../data/requests/iam\";\nimport { arrangeSitesByOrgWithAvailableApps, fetchAppSites } from \"../../data/requests/sites\";\nimport { ListItemText, useMediaQuery, IconButton, Drawer, List, ListItemAvatar, Avatar, InputLabel, MenuItem, FormControl, Box, Divider, Typography, CircularProgress } from \"@material-ui/core\";\nimport ConditionalWrapper from \"../../utils/ConditionalWrapper\";\nimport { sortArrayByStringProp } from \"../../utils/strings\";\nimport { ComponentsDataContext, Select, LegalBadge, Link } from \"@esko/cloud-ui-components\";\nimport { EskoLogo } from \"../../images/product-logos\";\nimport { useComponentsTranslation } from \"../../i18n/useComponentsTranslation\";\nimport { useTranslation } from \"react-i18next\";\nconst useStyles = makeStyles(theme => ({\n    list: {\n        width: 250,\n        marginBottom: 10,\n        position: \"relative\",\n        paddingTop: 10\n    },\n    fullList: {\n        width: \"auto\"\n    },\n    closeIcon: {\n        position: \"absolute\",\n        top: theme.spacing(1),\n        right: theme.spacing(2),\n        zIndex: 10,\n        \"& > .MuiSvgIcon-root\": {\n            fontSize: 12\n        }\n    },\n    closeNetWorkIcon: {\n        position: \"absolute\",\n        top: 5,\n        left: 5,\n        \"& > .MuiSvgIcon-root\": {\n            fontSize: \"1.2rem\"\n        }\n    },\n    appAnchor: {\n        textDecoration: \"none\",\n        color: \"inherit\",\n        \"&:hover\": {\n            textDecoration: \"none\",\n            color: \"inherit\"\n        }\n    },\n    legalBadge: {\n        backgroundColor: \"inherit\",\n        width: \"100%\",\n        marginTop: theme.spacing(5)\n    },\n    absolutePositioning: {\n        position: \"absolute\",\n        bottom: 0,\n        marginTop: 0\n    },\n    appsButton: {\n        minWidth: 48,\n        minHeight: 48,\n        display: \"flex\",\n        justifyContent: \"center\"\n    },\n    orgSeparator: {\n        pointerEvents: \"none\",\n        opacity: 0.8\n    },\n    appSwitcherPaper: {\n        overflowX: \"hidden\",\n        scrollbarWidth: \"thin\"\n    },\n    singleNavValue: {\n        marginTop: 20,\n        minWidth: 0,\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n    },\n    hiddenLogo: {\n        display: \"none\",\n        \"& + $defaultLogo\": {\n            display: \"flex\"\n        }\n    },\n    defaultLogo: {\n        display: \"none\",\n        transform: \"scale(1.2)\"\n    },\n    listLink: {\n        display: \"flex\",\n        alignItems: \"center\",\n        textAlign: \"left\"\n    }\n}));\nexport default function AppSwitcher({ organization, workspace, showNavigation = true, onClick = false, onChange = () => { }, bottomContent, showLegalBadge, legalBadge = {}, onError = err => console.log(\"Error on request:\", err), onAddWorkspace, language }) {\n    const compData = useContext(ComponentsDataContext);\n    const classes = useStyles();\n    const [drawerState, setDrawerState] = React.useState(false);\n    const [networkDrawerState, setNetworkDrawerState] = React.useState(false);\n    const [state, setState] = useState({\n        orgs: [],\n        workspaces: {},\n        organization: organization || \"\",\n        workspace: !!organization ? workspace || \"\" : \"\"\n    });\n    const [myNetwork, setMyNetwork] = React.useState({ users: true });\n    const { i18next, updatei18next, I18nextProvider } = useComponentsTranslation();\n    const { t } = useTranslation(\"components\");\n    React.useEffect(() => {\n        updatei18next(language);\n    }, [language]);\n    const getWorkspaces = () => {\n        fetchAppSites([state.organization]).then(results => {\n            const OrgWorkspaces = arrangeSitesByOrgWithAvailableApps(results);\n            const workspaces = OrgWorkspaces[state.organization]\n                ? OrgWorkspaces[state.organization].map(workSp => {\n                    const { apps, workspace: name, workspaceTitle: title } = workSp, others = __rest(workSp, [\"apps\", \"workspace\", \"workspaceTitle\"]);\n                    return Object.assign({ apps,\n                        name,\n                        title }, others);\n                })\n                : [];\n            setState(currState => {\n                const keepWorkspace = workspaces.length == 1 ? [...workspaces] : workspaces.filter(wks => wks.name == currState.workspace);\n                const newState = Object.assign(Object.assign({}, currState), { workspaces: { [currState.organization]: workspaces.sort(sortArrayByStringProp(\"title\", \"ASC\")) }, workspace: keepWorkspace[0] ? keepWorkspace[0].name : \"\" });\n                onChange(Object.assign(Object.assign({}, newState), { workspaces: newState.workspaces[currState.organization] }));\n                return Object.assign({}, newState);\n            });\n        }, err => onError(err));\n    };\n    //context kicks in\n    React.useEffect(() => {\n        if (compData && (compData.organization || compData.workspace)) {\n            setState(currState => {\n                const newState = Object.assign(Object.assign({}, currState), { organization: organization || currState.organization || compData.organization, workspace: workspace || currState.workspace || compData.workspace });\n                return newState;\n            });\n        }\n    }, [compData]);\n    //observer for when organization changes updates the workspaces belonging to it\n    React.useEffect(() => {\n        if (state.organization && !state.workspaces[state.organization]) {\n            getWorkspaces();\n        }\n    }, [state.organization, state.orgs, state.workspaces]);\n    React.useEffect(() => {\n        setState(currState => {\n            const newState = Object.assign(Object.assign({}, currState), { organization: !organization || !currState.orgs.filter(org => org.id === organization).length ? \"\" : organization, workspace: workspace });\n            return newState;\n        });\n    }, [organization, workspace]);\n    React.useEffect(() => {\n        const keepingOrg = (compData && compData.organization) || organization;\n        const keepingWorkspace = (compData && compData.workspace) || workspace;\n        if (!drawerState) {\n            setState(currState => (Object.assign(Object.assign({}, currState), { organization: keepingOrg, workspace: keepingWorkspace })));\n        }\n    }, [drawerState]);\n    React.useEffect(() => {\n        getOrganizations().then(res => {\n            const data = Array.isArray(res.data) ? res.data.sort(sortArrayByStringProp(\"readableName\", \"ASC\")) : [];\n            let newOrgs = data.map(org => ({\n                repoid: org.repoid,\n                id: org.organizationID,\n                name: org.readableName,\n                workspaces: org.workspaces || 0\n            }));\n            setState(currState => (Object.assign(Object.assign({}, currState), { orgs: newOrgs })));\n        }, err => onError(err));\n    }, []);\n    const handleOrganizationChange = event => {\n        var _a;\n        if (!((_a = event === null || event === void 0 ? void 0 : event.target) === null || _a === void 0 ? void 0 : _a.value)) {\n            return;\n        }\n        setState(currState => (Object.assign(Object.assign({}, currState), { organization: event.target.value })));\n    };\n    const handleWorkspaceChange = event => {\n        const newWorkspace = event.target.value || \"\";\n        const workspacesArr = state.workspaces[state.organization] || [];\n        onChange(Object.assign(Object.assign({}, state), { workspaces: workspacesArr, workspace: newWorkspace }));\n        setState(currState => (Object.assign(Object.assign({}, currState), { workspace: newWorkspace })));\n    };\n    const createAppURL = appMet => {\n        const currentApp = window.location.host\n            .split(\".\")\n            .splice(0, 1)\n            .join(\"\");\n        const appOrigin = window.location.origin.replace(currentApp, appMet.key);\n        const newAppURL = `${appOrigin}/${appMet.urlFragment}`;\n        return newAppURL;\n    };\n    const createLogo = appMet => {\n        const currentApp = window.location.host\n            .split(\".\")\n            .splice(0, 1)\n            .join(\"\");\n        const appOrigin = window.location.origin.replace(currentApp, appMet.key);\n        const appIconURL = `${appOrigin}/${appMet.icon}`;\n        const setDefaultLogo = e => {\n            const elem = e.target;\n            elem.onerror = \"\";\n            elem.src = \"\";\n            elem.className = classes.hiddenLogo;\n            return true;\n        };\n        return (React.createElement(React.Fragment, null,\n            React.createElement(\"img\", { width: 45, height: 45, src: appIconURL, onError: setDefaultLogo }),\n            React.createElement(\"span\", { className: clsx(classes.defaultLogo) },\n                \" \",\n                React.createElement(EskoLogo, null),\n                \" \")));\n    };\n    const onClickCallback = appMet => {\n        const newAppURL = createAppURL(appMet);\n        const selectedOrg = state.orgs.filter(orgItem => orgItem.id == state.organization)[0];\n        const currWorkSpaces = state.workspaces[state.organization] || [];\n        const selectedWorkspace = currWorkSpaces.filter(wksItem => wksItem.name == state.workspace)[0];\n        onClick({\n            organization: selectedOrg,\n            workspace: selectedWorkspace,\n            app: Object.assign({}, appMet),\n            appURL: newAppURL\n        });\n    };\n    const linkOrButton = (appMet, idx) => {\n        const linkProps = {\n            key: appMet.key,\n            title: appMet.name\n        };\n        if (typeof onClick == \"function\") {\n            linkProps.onClick = () => onClickCallback(appMet);\n        }\n        const anchor = children => (React.createElement(\"a\", { key: \"anchor-\" + appMet.key + idx, style: { lineHeight: 1 }, className: classes.appAnchor, href: createAppURL(appMet) }, children));\n        return (React.createElement(ConditionalWrapper, { key: \"conditional-\" + appMet.key + idx, condition: typeof onClick != \"function\", wrapper: anchor },\n            React.createElement(ListItem, Object.assign({ key: appMet.key + idx, button: true }, linkProps),\n                React.createElement(ListItemAvatar, null,\n                    React.createElement(Avatar, null, createLogo(appMet))),\n                React.createElement(ListItemText, { primary: appMet.name }))));\n    };\n    const toggleDrawer = open => event => {\n        if (event && event.type === \"keydown\" && (event.key === \"Tab\" || event.key === \"Shift\")) {\n            return;\n        }\n        setDrawerState(open);\n    };\n    const toggleNetworkDrawer = open => event => {\n        if (event && event.type === \"keydown\" && (event.key === \"Tab\" || event.key === \"Shift\")) {\n            return;\n        }\n        console.log(open);\n        setNetworkDrawerState(open);\n    };\n    const renderSites = () => {\n        const currWorkSpaces = state.workspaces[state.organization] || [];\n        if (currWorkSpaces.length > 1) {\n            return (React.createElement(FormControl, { style: { width: \"100%\" } },\n                React.createElement(InputLabel, { shrink: false, key: \"workspace-label\" }, t(\"workspace_plural\")),\n                React.createElement(Select, { labelId: \"workspaces-label\", id: \"workspaces\", value: currWorkSpaces == 1 ? currWorkSpaces[0].id : state.workspace, onChange: handleWorkspaceChange, displayEmpty: true, key: \"workspace-select\" },\n                    React.createElement(MenuItem, { value: \"\" }, t(\"pleaseSelect\")),\n                    currWorkSpaces.map(workspace => (React.createElement(MenuItem, { value: workspace.name, key: workspace.name }, workspace.title))))));\n        }\n        else {\n            const onlySite = currWorkSpaces[0];\n            return (React.createElement(FormControl, { style: { width: \"100%\" } },\n                React.createElement(InputLabel, { shrink: false }, t(\"workspace\")),\n                React.createElement(Typography, { variant: \"h6\", title: onlySite.title, className: clsx(classes.singleNavValue) }, onlySite.title)));\n        }\n    };\n    const renderApps = () => {\n        const currWorkSpaces = state.workspaces[state.organization] || [];\n        const chosenWorkspace = currWorkSpaces && state.workspace ? currWorkSpaces.filter(wks => wks.name == state.workspace) : [];\n        if (chosenWorkspace[0] && chosenWorkspace[0].apps.length) {\n            const appsMeta = chosenWorkspace[0].apps.filter(app => app).sort(sortArrayByStringProp(\"name\", \"asc\"));\n            const appsButtons = appsMeta.map((appMet, idx) => linkOrButton(appMet, idx));\n            if (appsButtons.length) {\n                appsButtons.unshift(React.createElement(ListItem, { key: \"apps-title\" },\n                    React.createElement(ListItemText, { primary: t(\"apps\") })));\n                appsButtons.push(React.createElement(ListItem, { key: \"apps-divider\" },\n                    React.createElement(Divider, { light: true })));\n            }\n            return appsButtons;\n        }\n        return \"\";\n    };\n    const navigation = () => {\n        const currWorkSpaces = state.workspaces[state.organization] || [];\n        return (React.createElement(React.Fragment, null,\n            React.createElement(ListItem, null,\n                React.createElement(FormControl, { style: { width: \"100%\" } },\n                    !!state.orgs.length && React.createElement(InputLabel, { shrink: false }, t(\"organization\")),\n                    state.orgs.length > 1 && (React.createElement(Select, { labelId: \"orgs-label\", id: \"orgs\", value: state.organization, onChange: handleOrganizationChange, displayEmpty: true },\n                        !state.organization && React.createElement(MenuItem, { value: \"\" }, t(\"pleaseSelect\")),\n                        state.orgs.map(orgItem => (React.createElement(MenuItem, { value: orgItem.id, key: orgItem.id }, orgItem.name))))),\n                    state.orgs.length == 1 && (React.createElement(Typography, { variant: \"h6\", title: state.orgs[0].name, className: clsx(classes.singleNavValue) }, state.orgs[0].name)))),\n            !!currWorkSpaces.length && React.createElement(ListItem, null, renderSites())));\n    };\n    const renderAddWorkspaceLink = addWorkspaceCallback => {\n        const validCallback = typeof addWorkspaceCallback === \"function\";\n        const organization = state.organization;\n        const organizations = state.orgs;\n        if (validCallback) {\n            return (React.createElement(ListItem, null,\n                React.createElement(ListItemText, { primary: React.createElement(Link, { component: \"button\", color: \"inherit\", onClick: () => addWorkspaceCallback({ organization, organizations }), className: clsx(classes.listLink), startIcon: React.createElement(AddIcon, null) }, t(\"addNewWorkspace\")) })));\n        }\n    };\n    const highToAbsolute = useMediaQuery(\"(min-height:600px)\");\n    return (React.createElement(I18nextProvider, { i18n: i18next },\n        React.createElement(Suspense, { fallback: React.createElement(CircularProgress, { size: 32 }) },\n            React.createElement(\"div\", null,\n                React.createElement(Box, { className: clsx(classes.appsButton) },\n                    React.createElement(IconButton, { onClick: toggleDrawer(true) },\n                        React.createElement(AppsIcon, { style: { fontSize: \"1.5rem\" } }))),\n                React.createElement(Drawer, { anchor: \"left\", open: drawerState, onClose: toggleDrawer(false), PaperProps: {\n                        className: classes.appSwitcherPaper\n                    } },\n                    React.createElement(\"div\", { className: classes.list, role: \"presentation\" },\n                        React.createElement(IconButton, { className: classes.closeIcon, onClick: () => {\n                                toggleNetworkDrawer(false)();\n                                toggleDrawer(false)();\n                            }, size: \"small\" },\n                            React.createElement(CloseIcon, { fontSize: \"inherit\" })),\n                        React.createElement(List, null,\n                            showNavigation && navigation(),\n                            !state.orgs.length && (React.createElement(ListItem, null,\n                                React.createElement(ListItemText, null, t(\"errorMessages.noObjectFound_plural\", { object: t(\"organization_plural\") })))),\n                            !!state.orgs.length &&\n                                state.organization &&\n                                !!state.workspaces[state.organization] &&\n                                !state.workspaces[state.organization].length && (React.createElement(ListItem, null,\n                                React.createElement(ListItemText, null, t(\"errorMessages.noObjectFound_plural\", { object: t(\"workspace_plural\") })))),\n                            renderAddWorkspaceLink(onAddWorkspace),\n                            !!state.orgs.length && state.organization && state.workspace && React.createElement(React.Fragment, null, renderApps()))),\n                    !!bottomContent &&\n                        (typeof bottomContent === \"function\"\n                            ? bottomContent(() => {\n                                setDrawerState(false);\n                            })\n                            : bottomContent),\n                    !!showLegalBadge && (React.createElement(\"span\", { className: clsx(classes.legalBadge, { [classes.absolutePositioning]: highToAbsolute }) },\n                        React.createElement(LegalBadge, Object.assign({}, legalBadge)))))))));\n}\nAppSwitcher.propTypes = {\n    organization: Proptypes.string,\n    workspace: Proptypes.string,\n    showNavigation: Proptypes.bool,\n    showLegalBadge: Proptypes.bool,\n    legalBadge: Proptypes.shape({\n        size: Proptypes.string,\n        minimal: Proptypes.bool,\n        links: Proptypes.arrayOf(Proptypes.shape({\n            url: Proptypes.string,\n            display: Proptypes.string\n        })),\n        logo: Proptypes.node,\n        line1: Proptypes.string,\n        line2: Proptypes.string\n    }),\n    bottomContent: Proptypes.oneOfType([Proptypes.node, Proptypes.func]),\n    onClick: Proptypes.func,\n    onChange: Proptypes.func,\n    onAddWorkspace: Proptypes.func,\n    onError: Proptypes.func,\n    language: Proptypes.string\n};\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}